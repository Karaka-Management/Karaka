(()=>{var o="static-v1.0.0",s="runtime-v1.0.0",a=["cssOMS/styles.css","Web/Backend/js/backend.min.js","Web/Backend/img/404.svg","Web/Backend/img/default-user.jpg","Web/Backend/img/favicon.ico","Web/Backend/img/maskable_icon.png","Web/Backend/img/logo.png","Web/Backend/img/logo.webp","Web/Backend/img/protected_content.svg","Web/Backend/offline.htm"];self.addEventListener("install",e=>{e.waitUntil(caches.open(o).then(t=>t.addAll(a)).then(self.skipWaiting())),setInterval(l,5*60*1e3)});var c='<div style="position: fixed; bottom: 0; left: 0; width: 100%; background-color: red; color: white; text-align: center; padding: 10px;">Offline Mode</div>';self.addEventListener("fetch",e=>{!e.request.url.startsWith(self.location.origin)||e.request.method!=="GET"||e.respondWith(fetch(e.request).then(()=>caches.open(s).then(t=>fetch(e.request).then(n=>t.put(e.request,n.clone()).then(()=>n)))).catch(()=>caches.match(e.request).then(t=>t?t.clone().text().then(function(i){if(!i.includes("<body>"))return t;let r=i.replace("<body>","<body>"+c);return new Response(r,{headers:t.headers,status:t.status,statusText:t.statusText})}):caches.match("Web/Backend/offline.htm"))))});self.addEventListener("activate",e=>{let t=[o,s];e.waitUntil(caches.keys().then(n=>n.filter(i=>!t.includes(i))).then(n=>Promise.all(n.map(i=>caches.delete(i)))).then(()=>self.clients.claim()))});self.addEventListener("periodicsync",e=>{e.tag});function l(){if(Notification.permission!=="granted")return;let e=new Date(Date.now()-60*5);fetch("/api/notification?start="+encodeURIComponent(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())).then(t=>{if(!t.ok)throw new Error;return t.json()}).then(t=>{typeof t[0]<"u"&&t[0].response.length>0&&registration.showNotification(t[0].title,{body:t[0].message,vibrate:[200,100],tag:"notification"})})}})();
/**
 * Service worker.
 *
 * @copyright  Dennis Eichhorn
 * @license    OMS License 2.2
 * @version    1.0.0
 * @since      1.0.0
 */
