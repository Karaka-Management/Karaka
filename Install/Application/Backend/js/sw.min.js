(()=>{var o="static-v1.0.0",s="runtime-v1.0.0",a=["cssOMS/styles.css","Web/Backend/js/backend.min.js","Web/Backend/img/404.svg","Web/Backend/img/default-user.jpg","Web/Backend/img/favicon.ico","Web/Backend/img/maskable_icon.png","Web/Backend/img/logo.png","Web/Backend/img/logo.webp","Web/Backend/img/protected_content.svg","Web/Backend/offline.htm","/"];self.addEventListener("install",t=>{t.waitUntil(caches.open(o).then(e=>e.addAll(a)).then(self.skipWaiting())),setInterval(l,5*60*1e3)});var c='<div style="position: fixed; bottom: 0; left: 0; width: 100%; background-color: red; color: white; text-align: center; padding: 10px;">Offline Mode</div>';self.addEventListener("fetch",t=>{t.request.url.startsWith(self.location.origin)&&t.respondWith(fetch(t.request).then(()=>caches.open(s).then(e=>fetch(t.request).then(n=>e.put(t.request,n.clone()).then(()=>n)))).catch(()=>caches.match(t.request).then(e=>e?e.clone().text().then(function(i){if(!i.includes("<body>"))return e;let r=i.replace("<body>","<body>"+c);return new Response(r,{headers:e.headers,status:e.status,statusText:e.statusText})}):caches.match("Web/Backend/offline.htm"))))});self.addEventListener("activate",t=>{let e=[o,s];t.waitUntil(caches.keys().then(n=>n.filter(i=>!e.includes(i))).then(n=>Promise.all(n.map(i=>caches.delete(i)))).then(()=>self.clients.claim()))});self.addEventListener("periodicsync",t=>{t.tag});function l(){if(Notification.permission!=="granted")return;let t=new Date(Date.now()-60*5);fetch("/api/notification?start="+encodeURIComponent(t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds())).then(e=>{if(!e.ok)throw new Error;return e.json()}).then(e=>{typeof e[0]<"u"&&e[0].response.length>0&&registration.showNotification(e[0].title,{body:e[0].message,vibrate:[200,100],tag:"notification"})})}})();
/**
 * Service worker.
 *
 * @copyright  Dennis Eichhorn
 * @license    OMS License 2.0
 * @version    1.0.0
 * @since      1.0.0
 */
