(()=>{var u=class l{static triggerEvent=function(t,e){if(document.createEvent){let n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),n.eventName=e,t.dispatchEvent(n)}else{let n=document.createEventObject();n.eventName=e,n.eventType=e,t.fireEvent(n.eventType,n)}};static getArray=function(t,e,n="/"){let i=l.ltrim(t,n).split(n),r=e;for(let o in i)if(Object.prototype.hasOwnProperty.call(i,o)){if(typeof r>"u"||!Object.prototype.hasOwnProperty.call(r,i[o]))return null;r=r[i[o]]}return r};static trim=function(t,e=" "){return l.ltrim(l.rtrim(t,e),e)};static rtrim=function(t,e=" "){return t.replace(new RegExp("["+e+"]*$"),"")};static ltrim=function(t,e=" "){return t.replace(new RegExp("^["+e+"]*"),"")};static htmlspecialchars=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"]];static htmlspecialchars_encode=function(t){let e=t,n=l.htmlspecialchars.length;for(let i=0;i<n;++i)e=e.replace(new RegExp(l.htmlspecialchars[i][0],"g"),l.htmlspecialchars[i][1]);return e};static htmlspecialchars_decode=function(t){let e=t,n=l.htmlspecialchars.length;for(let i=0;i<n;++i)e=e.replace(new RegExp(l.htmlspecialchars[i][1],"g"),l.htmlspecialchars[i][0]);return e};static substr_count=function(t,e){if(t+="",e+="",e.length<=0)return t.length+1;let n=0,i=0,r=e.length;for(;i=t.indexOf(e,i),i>=0;)++n,i+=r;return n};static hasClass=function(t,e){return typeof t<"u"&&t!==null&&(typeof t.className=="string"&&t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))!==null||typeof t.className.baseVal=="string"&&t.className.baseVal.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))!==null)};static addClass=function(t,e){l.hasClass(t,e)||(typeof t.className=="string"?t.className+=t.className!==""?" "+e:e:typeof t.className.baseVal=="string"&&(t.className.baseVal+=t.className.baseVal!==""?" "+e:e))};static removeClass=function(t,e){if(l.hasClass(t,e)){let n=new RegExp("(\\s|^)"+e);typeof t.className=="string"?t.className=t.className.replace(n,"").trim():typeof t.className.baseVal=="string"&&(t.className.baseVal=t.className.baseVal.replace(n,"").trim())}};static watcher=function(){let t=0;return function(e,n){clearTimeout(t),t=setTimeout(e,n)}}();static preventAll=function(t){return t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),t.cancelBubble=!0,!1};static ready=function(t){document.readyState==="complete"||document.readyState==="loaded"||document.readyState==="interactive"?t():document.addEventListener("DOMContentLoaded",function(e){t()})};static getValue=function(t){switch(t.tagName.toLowerCase()){case"div":case"pre":case"article":case"section":return t.innerHTML;default:return t.value}};static empty=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)};static hash=function(t){let e=0,n=t.length;for(let i=0;i<n;++i)e=e*31+t.charCodeAt(i);return e};static isNode=function(t){return typeof Node=="object"?t instanceof Node:t&&typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"};static isElement=function(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"};static getByClass=function(t,e){let n=t.childNodes.length;for(let i=0;i<n;++i)if(l.hasClass(t.childNodes[i],e))return t.childNodes[i];return null};static addEventListenerToAll=function(t,e,n){let i=t.length;for(let r=0;r<i;++r)t[r].addEventListener(e,n)};static isValidJson=function(t){try{JSON.parse(t)}catch{return!1}return!0};static merge=function(t,e){let n=l.clone(t);for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&typeof e[i]=="object"?n[i]=l.merge(n[i],e[i]):n[i]=e[i];return n};static clone=function(t){return{...t}};static isset=function(t){return typeof t<"u"&&t!==null};static strpbrk=function(t,e){let n=e.length,i=t.length,r=t.length;for(let o=0;o<n;++o)(i=t.indexOf(e.charAt(o)))>=0&&r>i&&(r=i);return t.slice(r)}};var K=class{constructor(){this.assets={},this.registerLoadedAssets()}registerLoadedAssets(){if(this.assets={},typeof document>"u")return;let t=document.getElementsByTagName("script"),e=t?t.length:0;for(let n=0;n<e;++n)this.assets[u.hash(t[n].src)]=t[n].src}load(t,e,n){let i;if(!this.assets[i=u.hash(t)]){let r=null;if(e==="js"){if(r=document.createElement("script"),r.setAttribute("type","text/javascript"),r.setAttribute("src",t),typeof r<"u"){let o=document.getElementsByTagName("head");o&&o[0].appendChild(r)}this.assets[i]=t}else if(e==="css"){if(r=document.createElement("link"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",t),typeof r<"u"){let o=document.getElementsByTagName("head");o&&o[0].appendChild(r)}this.assets[i]=t}else e==="img"&&(this.assets[i]=new Image,this.assets[i].src=t);return n&&(r.onreadystatechange=function(){this.readyState==="complete"&&n()},r.onload=n()),i}return!1}get(t){return t=u.hash(t),this.assets[t]?this.assets[t]:null}remove(t){return t=u.hash(t),typeof this.assets[t]<"u"?(delete this.assets[t],!0):!1}};var q=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warning",NOTICE:"notice",INFO:"info",DEBUG:"debug"});var k=class l{constructor(t){this.uri="",this.scheme="",this.host="",this.port="",this.user="",this.pass="",this.query=null,this.queryString="",this.fragment="",this.base="",this.root="/",this.set(t)}static parseUrl(t,e="php"){let n=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};if(!Object.prototype.hasOwnProperty.call(i,e))throw new Error("Unexpected parsing mode.","UriFactory",52);let r=i[e].exec(t),o={},s=14;for(;--s;)r[s]&&(o[n[s]]=r[s]);return delete o.source,o}static getUriQueryParameter(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let i=new RegExp("[\\?&]*"+e+"=([^&#]*)").exec(t);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))}static getAllUriQueryParameters(t){let e={},n=[],i=null;if(t.length){n=t.split("&");for(i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;let r=n[i].split("=")[0];r.length&&(typeof e[r]>"u"&&(e[r]=[]),e[r].push(n[i].split("=")[1]))}}return e}set(t){this.uri=t;let e=l.parseUrl(this.uri,"php");this.scheme=e.scheme,this.host=e.host,this.port=e.port,this.user=e.user,this.pass=e.pass,this.path=e.path,this.path.endsWith(".php")&&(this.path=this.path.substr(0,-4)),this.queryString=typeof e.query<"u"?e.query:[],this.queryString!==null&&(this.query=l.getAllUriQueryParameters(this.queryString)),this.fragment=typeof e.fragment<"u"?e.fragment:"",this.base=this.scheme+"://"+this.host+this.root}setRootPath(t){this.root=t,this.set(this.uri)}getRootPath(){return this.root}getBase(){return this.base}getScheme(){return this.scheme}getHost(){return this.host}getPort(){return this.port}getUser(){return this.user}getPass(){return this.pass}getQuery(){return this.queryString}getUri(){return this.uri}getFragment(){return this.fragment}getPath(){return this.path}getPathOffset(){return u.substr_count(this.root,"/")-1}};var B=class l{constructor(t){this.id=t,this.success=null,this.finally=null,this.lastSubmit=0,this.form=null,this.submitInjects=[],this.method="POST",this.action="",this.hasChanges=!1,this.bind()}initializeMembers(){this.submitInjects=[],this.method="POST",this.action=""}getMethod(){return this.method}getAction(){return this.action}getLastSubmit(){return this.lastSubmit}updateLastSubmit(){this.lastSubmit=Math.floor(Date.now())}isOnChange(){let t=this.getFormElement().getAttribute("data-on-change");return t==="true"||t==="1"}getSubmit(t=null){return(t===null?document:t).querySelectorAll("#"+this.id+" input[type=submit], button[form="+this.id+"][type=submit], input[form="+this.id+"][type=submit], #"+this.id+" button[type=submit], .submit[data-form="+this.id+"], #"+this.id+" .submit"+(t!==null?"  .submit":""))}getImagePreviews(){return document.querySelectorAll("#"+this.id+" input[type=file].preview")}getUpdate(t=null){return(t===null?document:t).querySelectorAll("button[form="+this.id+"].update-form, .update-form[data-form="+this.id+"], #"+this.id+' .update-form, [form="'+this.id+'"].update-form'+(t!==null?", .update-form":""))}getSave(t=null){return(t===null?document:t).querySelectorAll("button[form="+this.id+"].save-form, .save-form[data-form="+this.id+"], #"+this.id+' .save-form, [form="'+this.id+'"].save-form'+(t!==null?", .save-form":""))}getCancel(t=null){return(t===null?document:t).querySelectorAll("#"+this.id+" input[type=reset], button[form="+this.id+"][type=reset], input[form="+this.id+"][type=reset], #"+this.id+" button[type=reset], button[form="+this.id+"].cancel-form, .cancel-form[data-form="+this.id+"], #"+this.id+' .cancel-form, [form="'+this.id+'"].cancel-form'+(t!==null?", .cancel-form":""))}getRemove(t=null){return(t===null?document:t).querySelectorAll("button[form="+this.id+"].remove-form, .remove-form[data-form="+this.id+"], #"+this.id+' .remove-form, [form="'+this.id+'"].remove-form'+(t!==null?", .remove-form":""))}getAdd(t=null){return(t===null?document:t).querySelectorAll("button[form="+this.id+"].add-form, .add-form[data-form="+this.id+"], #"+this.id+' .add-form, [form="'+this.id+'"].add-form'+(t!==null?", .add-form":""))}getSuccess(){return this.success}setSuccess(t){this.success=t}getFinally(){return this.finally}setFinally(t){this.finally=t}injectSubmit(t){this.submitInjects.push(t)}getFormElements(t=null){let e=t===null?this.getFormElement():t;if(!e)return[];let n=e.getElementsByTagName("select"),i=e.getElementsByTagName("textarea"),r=[].slice.call(e.getElementsByTagName("input")),o=e.getElementsByTagName("button"),s=e.getElementsByTagName("canvas"),a=[].slice.call(document.querySelectorAll(":not(#"+this.id+") [form="+this.id+"]")),c=e.querySelectorAll("[data-name]"),d=document.querySelectorAll(":not(#"+this.id+") [data-form="+this.id+"]"),p=r.length,f=a.length,g=d.length;for(let m=0;m<p;++m)(r[m]===void 0||typeof r[m]<"u"&&(r[m].type==="checkbox"||r[m].type==="radio")&&!r[m].checked)&&delete r[m];for(let m=0;m<f;++m){if(a[m]===void 0||typeof a[m]<"u"&&e.contains(a[m])){delete a[m];continue}(a[m]===void 0||typeof a[m]<"u"&&(a[m].type==="checkbox"||a[m].type==="radio")&&!a[m].checked)&&delete a[m]}for(let m=0;m<g;++m)if(d[m]===void 0||typeof d[m]<"u"&&e.contains(d[m])){delete d[m];continue}return Array.prototype.slice.call(r).concat(Array.prototype.slice.call(n),Array.prototype.slice.call(i),Array.prototype.slice.call(o),Array.prototype.slice.call(a),Array.prototype.slice.call(c),Array.prototype.slice.call(d),Array.prototype.slice.call(s)).filter(function(m){return m})}getFirstInputElement(t=null){return(t===null?document:t).querySelector("#"+this.id+" input, #"+this.id+" textarea, #"+this.id+" select, [form="+this.id+"], [data-form="+this.id+"]")}getUniqueFormElements(t){let e={};return t.filter(function(n){return Object.prototype.hasOwnProperty.call(e,n.name)?!1:e[n.name]=!0})}getData(t=null){let e={},n=new FormData,i=this.getFormElements(t),r=i.length,o=null;for(let s=0;s<r;++s){let a=l.getElementId(i[s]);if(a!==null){if(i[s].tagName.toLowerCase()==="canvas")o=i[s].toDataURL("image/png");else if(i[s].tagName.toLowerCase()==="input"&&i[s].type==="file"){let c=i[s].files.length;for(let d=0;d<c;++d)n.append(a+d,i[s].files[d])}else if(i[s].tagName.toLowerCase()==="iframe"){let c=Array.prototype.slice.call(i[s].contentWindow.document.querySelectorAll("[form="+this.id+"]")).concat(Array.prototype.slice.call(i[s].contentWindow.document.querySelectorAll("[data-form="+this.id+"] [data-name]"))).filter(function(p){return p}),d=c.length;for(let p=0;p<d;++p){o=c[p].value;let f=l.getElementId(c[p]);Object.prototype.hasOwnProperty.call(e,f)?(e[f].constructor!==Array&&(e[f]=[e[f]]),e[f].push(o)):e[f]=o}continue}else typeof i[s].value<"u"?o=i[s].value:i[s].getAttribute("data-value")!==null?o=i[s].getAttribute("data-value"):o=i[s].innerHTML;Object.prototype.hasOwnProperty.call(e,a)?(e[a].constructor!==Array&&(e[a]=[e[a]]),e[a].push(o)):e[a]=o}}for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.append(s,e[s]!==null&&e[s].constructor===Array?JSON.stringify(e[s]):e[s]);return n}resetValues(){let t=this.getFormElements(),e=t.length;this.getFormElement().reset();for(let i=0;i<e;++i)l.getElementId(t[i])!==null&&(t[i].tagName.toLowerCase()==="canvas"?t[i].clearRect(0,0,t[i].width,t[i].height):t[i].tagName.toLowerCase()==="textarea"&&(t[i].innerHTML=""),t[i].getAttribute("data-value")!==null&&t[i].setAttribute("data-value",""),t[i].getAttribute("data-name")!==null&&(t[i].innerHTML=""))}getId(){return this.id}getFormElement(){return this.form===null?this.form=document.getElementById(this.id):this.form}isValid(t=null){let e=t===null?this.getFormElements():t,n=e.length;try{for(let i=0;i<n;++i)if(!(!e[i].required&&e[i].value==="")&&(e[i].required&&e[i].value===""||e[i].required&&e[i].getAttribute("type")==="checkbox"&&!e[i].checked||typeof e[i].pattern<"u"&&e[i].pattern!==""&&!new RegExp(e[i].pattern).test(e[i].value)||typeof e[i].maxlength<"u"&&e[i].maxlength!==""&&e[i].value.length>e[i].maxlength||typeof e[i].minlength<"u"&&e[i].minlength!==""&&e[i].value.length<e[i].minlength||typeof e[i].max<"u"&&e[i].max!==""&&e[i].value>e[i].max||typeof e[i].min<"u"&&e[i].min!==""&&e[i].value<e[i].min))return!1}catch(i){u.Log.Logger.instance.error(i)}return!0}getInvalid(t=null){let e=t===null?this.getFormElements():t,n=e.length,i=[];try{for(let r=0;r<n;++r)(e[r].required&&e[r].value===""||typeof e[r].pattern<"u"&&e[r].pattern!==""&&!new RegExp(e[r].pattern).test(e[r].value)||typeof e[r].maxlength<"u"&&e[r].maxlength!==""&&e[r].value.length>e[r].maxlength||typeof e[r].minlength<"u"&&e[r].minlength!==""&&e[r].value.length<e[r].minlength||typeof e[r].max<"u"&&e[r].max!==""&&e[r].value>e[r].max||typeof e[r].min<"u"&&e[r].min!==""&&e[r].value<e[r].min)&&i.push(e[r])}catch(r){u.Log.Logger.instance.error(r)}return i}static getElementId(t){return t.getAttribute("name")!==null?t.getAttribute("name"):t.getAttribute("data-name")!==null?t.getAttribute("data-name"):t.getAttribute("id")!==null?t.getAttribute("id"):t.getAttribute("type")!==null?t.getAttribute("type"):null}getSubmitInjects(){return this.submitInjects}bind(){this.clean(),this.form=this.getFormElement(),this.form!==null&&(typeof this.form.attributes.method<"u"?this.method=this.form.attributes.method.value:typeof this.form.attributes["data-method"]<"u"?this.method=this.form.attributes["data-method"].value:this.method="EMPTY",typeof this.form.attributes.action<"u"?this.action=this.form.attributes.action.value:typeof this.form.attributes["data-uri"]<"u"?this.action=this.form.attributes["data-uri"].value:this.action="EMPTY")}getElementsToBind(t=null){let n=(t===null?document:t).querySelectorAll("[form="+this.id+"]");return Array.prototype.slice.call(n).concat(Array.prototype.slice.call([this.form])).filter(function(i){return i})}clean(){this.initializeMembers()}};var S=class l{static setQuery(t,e,n=!0){return n||!Object.prototype.hasOwnProperty.call(l.uri,t)?(l.uri[t]=e,!0):!1}static getQuery(t){return Object.prototype.hasOwnProperty.call(l.uri,t)?l.uri[t]:null}static clearAll(){return l.uri={},!0}static clear(t){return Object.prototype.hasOwnProperty.call(l.uri,t)?(delete l.uri[t],!0):!1}static clearLike(t){let e=!1,n=new RegExp(t);for(let i in l.uri)Object.prototype.hasOwnProperty.call(l.uri,i)&&n.test(i)&&(delete l.uri[i],e=!0);return e}static unique(t){let e=k.parseUrl(t),n=[];if(t.includes("?")){let r=typeof e.query>"u"?[]:e.query.replace(/\?/g,"&").split("&"),o={},s=r.length,a=null;if((typeof e.fragment>"u"||e.fragment===null)&&r[s-1].includes("#")){let c=r[s-1].split("#")[1];e.fragment=c[1],r[s-1]=c[0]}for(let c=0;c<s;++c)a=r[c].split("="),o[a[0]]=a.length<2?"":a[1];for(let c in o)Object.prototype.hasOwnProperty.call(o,c)&&o[c]!==""&&o[c]!==null&&typeof o[c]<"u"?n.push(c+"="+(o[c].includes("%")?o[c]:encodeURIComponent(o[c]))):Object.prototype.hasOwnProperty.call(o,c)&&n.push(c)}let i=typeof e.fragment<"u"?e.fragment.split("#"):null;return t=(typeof e.scheme<"u"?e.scheme+"://":"")+(typeof e.username<"u"?e.username+":":"")+(typeof e.password<"u"?e.password+"@":"")+(typeof e.host<"u"?e.host:"")+(typeof e.port<"u"?":"+e.port:"")+(typeof e.path<"u"?e.path:"")+(typeof e.query<"u"?"?"+n.join("&"):"")+(typeof e.fragment<"u"?"#"+i[i.length-1]:""),t}static buildAbsolute(t,e=null){return t.startsWith("/")?l.build(window.location.origin+t,e):t.indexOf("://")===-1?l.build(window.location.origin+"/"+t,e):t}static build(t,e=null){let n=typeof window>"u"?"":k.parseUrl(window.location.href),i=k.getAllUriQueryParameters(typeof n.query>"u"?{}:n.query);for(let o in i)Object.prototype.hasOwnProperty.call(i,o)&&l.setQuery("?"+o,i[o]);let r=t.replace(new RegExp("{[/#?%@\xB0.$!].*?}","g"),function(o){if(o=o.substring(1,o.length-1),e!==null&&(Object.prototype.hasOwnProperty.call(e,o)||o.includes("/")))return typeof e[o]>"u"&&o.includes("/")?u.getArray(o,e):e[o];if(typeof l.uri[o]<"u")return l.uri[o];if(o.indexOf("!")===0){let c=document.querySelector(o.substring(1));if(!c)return"";if(c.tagName.toLowerCase()!=="form")return c.value;let d="",p=new B(c.id).getData();for(let f of p.entries())d+="&"+f[0]+"="+f[1];return d}else{if(o.indexOf("?")===0)return k.getUriQueryParameter(n.query,o.substring(1));if(o==="#")return n.fragment;if(o.indexOf("#")===0){let c=document.getElementById(o.substring(1));if(c){if(c.tagName.toLowerCase()!=="form")return c.value;let d="",p=new B(c.id).getData();for(let f of p.entries())d+="&"+f[0]+"="+f[1];return d}return""}else{if(o.indexOf("?")===0&&o.length===1)return n.query();if(o.indexOf("/")===0&&o.length===1)return n.path;if(o.indexOf("\xB0")===0&&o.length===1){if(!navigator.geolocation)return;var s=0,a=0;return navigator.geolocation.getCurrentPosition(c=>{s=c.coords.latitude,a=c.coords.longitude}),s===0&&a===0?"":s+","+a}else return o.indexOf(":user")===0?n.user:o.indexOf(":pass")===0?n.pass:o.indexOf("/")===0?"ERROR%20PATH":o==="%"?typeof window>"u"?"":window.location.href:o}}});return r.indexOf("?")===-1&&(r=r.replace("&","?")),l.unique(r)}static setupUriBuilder(t){l.setQuery("/scheme",t.getScheme()),l.setQuery("/host",t.getHost()),l.setQuery("/base",u.rtrim(t.getBase(),"/"))}};S.uri={};var R=Object.freeze({POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD"});var L=Object.freeze({JSON:"json",RAW:"raw",FILE:"file",URL_ENCODE:"url",FORM_DATA:"formdata"});var N=class{constructor(t=null,e=null,n=null){this.uri=t,this.method=e!==null?e:R.GET,this.requestHeader={},this.result={},this.type=n!==null?n:L.JSON,this.data={},this.requestHeader["Content-Type"]=this.setContentTypeBasedOnType(this.type),this.type===L.FORM_DATA&&delete this.requestHeader["Content-Type"],this.result[0]=function(i){v.getInstance().info('Unhandled response from "'+i.responseURL+'" with response data "'+i.response+'"')},this.xhr=new XMLHttpRequest}setContentTypeBasedOnType(t){switch(t){case L.JSON:return"application/json";case L.URL_ENCODE:return"application/x-www-form-urlencoded";case L.FILE:return"";case L.FORM_DATA:return"multipart/form-data";default:return"*/*"}}setMethod(t){this.method=t}getMethod(){return this.method}setResponseType(t){this.xhr.responseType=t}getResponseType(){return this.responseType}setRequestHeader(t,e){this.requestHeader[t]=e,e==="multipart/form-data"&&delete this.requestHeader[t]}getRequestHeader(){return this.requestHeader}setUri(t){this.uri=t}getUri(){return this.uri}setSuccess(t){this.result[200]=t}setResultCallback(t,e){this.result[t]=e}setData(t){this.data=t}addData(t,e){this.data[t]=e}getData(){return this.data}setType(t){this.type=t,this.requestHeader["Content-Type"]=this.setContentTypeBasedOnType(this.type)}getType(){return this.type}queryfy(t){let e=[];for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}send(){if(this.uri==="")return;let t=this;if(this.xhr.readyState!==1){let e=this.uri;if(this.method===R.GET)for(let n of Object.entries(this.data))e+="&"+n[0]+"="+n[1];else e=this.uri;this.xhr.open(this.method,S.build(e));for(let n in this.requestHeader)Object.prototype.hasOwnProperty.call(this.requestHeader,n)&&this.requestHeader[n]!==""&&this.requestHeader[n]!=="multipart/form-data"&&this.xhr.setRequestHeader(n,this.requestHeader[n])}window.omsApp.logger.log(S.build(this.uri)),window.omsApp.logger.log(this.xhr),this.xhr.onreadystatechange=function(){switch(t.xhr.readyState){case 4:typeof t.result[t.xhr.status]>"u"?t.result[0](t.xhr):t.result[t.xhr.status](t.xhr);break;default:}},this.type===L.JSON?this.xhr.send(JSON.stringify(this.data)):this.type===L.RAW||this.type===L.FILE?this.xhr.send(this.data):this.type===L.URL_ENCODE?this.xhr.send(this.queryfy(this.data)):this.type===L.FORM_DATA&&this.xhr.send(this.data)}};var M=Object.freeze({OPERA:"opera",FIREFOX:"firefox",SAFARI:"safari",IE:"msie",EDGE:"edge",CHROME:"chrome",BLINK:"blink",UNKNOWN:"unknown"});var D=Object.freeze({WINDOWS_10:"windows nt 10.0",WINDOWS_81:"windows nt 6.3",WINDOWS_8:"windows nt 6.2",WINDOWS_7:"windows nt 6.1",WINDOWS_VISTA:"windows nt 6.0",WINDOWS_SERVER:"windows nt 5.2",WINDOWS_XP:"windows nt 5.1",WINDOWS_XP_2:"windows xp",WINDOWS_2000:"windows nt 5.0",WINDOWS_ME:"windows me",WINDOWS_98:"win98",WINDOWS_95:"win95",WINDOWS_311:"win16",MAC_OS_X:"macintosh",MAC_OS_X_2:"mac os x",MAC_OS_9:"mac_powerpc",LINUX:"linux",UBUNTU:"ubuntu",IPHONE:"iphone",IPOD:"ipod",IPAD:"ipad",ANDROID:"android",BLACKBERRY:"blackberry",MOBILE:"webos",UNKNOWN:"UNKNOWN"});var V=class{static getBrowser(){return typeof window>"u"?M.UNKNOWN:window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?M.OPERA:typeof InstallTrigger<"u"?M.FIREFOX:Object.toString.call(window.HTMLElement).indexOf("Constructor")>0?M.SAFARI:document.documentMode?M.IE:window.StyleMedia?M.EDGE:window.chrome&&window.chrome.webstore?M.CHROME:(typeof isChrome<"u"&&isChrome||typeof isOpera<"u"&&isOpera)&&window.CSS?M.BLINK:M.UNKNOWN}static getOS(){if(typeof navigator>"u")return D.UNKNOWN;for(let t in D)if(Object.prototype.hasOwnProperty.call(D,t)&&navigator.userAgent.toLowerCase().indexOf(D[t])!==-1)return D[t];return D.UNKNOWN}};var v=class l{constructor(t=!0,e=!0,n=!1){this.verbose=t,this.ui=e,this.remote=n}static getInstance(t=!0,e=!0,n=!1){return l.instance||(l.instance=new l(t,e,n)),l.instance}interpolate(t,e){t=typeof t>"u"?l.MSG_FULL:t;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&typeof t=="string"&&(t=t.replace("{"+n+"}",e[n]));return typeof t!="string"?JSON.stringify(t):t}createContext(t,e,n){let i;try{throw new Error("")}catch(r){i=r.stack||""}return e.backtrace=i,e.datetime=new Date().toISOString(),e.version="1.0.0",e.os=V.getOS(),e.browser=V.getBrowser(),e.path=typeof window>"u"?"":window.location.href,e.datetime=new Date().toString(),e.level=n,e.message=t,e}write(t,e,n){e=this.createContext(t,e,n),this.verbose&&this.writeVerbose(t,e,n),this.ui&&this.writeUi(t,e),this.remote&&this.writeRemote(e)}writeUi(t,e){Notification.permission!=="granted"&&Notification.permission!=="denied"&&Notification.requestPermission().then(function(i){});let n=new Notification("Logger",{body:this.interpolate(t,e)});setTimeout(n.close.bind(n),4e3)}writeVerbose(t,e,n){let i="000";switch(n){case"info":case"notice":case"log":i="000";break;case"debug":i="289E39";break;case"warning":case"alert":i="FFA600";break;case"error":case"critical":case"emergency":i="CF304A";break;default:}console.log("%c"+this.interpolate(t,e,n),"color: #"+i)}writeRemote(t){let e=new N;e.setData(t),e.setType(jsOMS.Message.Response.Response.ResponseType.JSON),e.setUri("/{/lang}/api/log"),e.setMethod(N.RequestMethod.POST),e.setRequestHeader("Content-Type","application/json"),e.setSuccess(function(n){}),e.send()}emergency(t,e={}){this.write(t,e,q.EMERGENCY)}alert(t,e={}){this.write(t,e,q.ALERT)}critical(t,e={}){this.write(t,e,q.CRITICAL)}error(t,e={}){this.write(t,e,q.ERROR)}warning(t,e={}){this.write(t,e,q.WARNING)}notice(t,e={}){this.write(t,e,q.NOTICE)}info(t,e={}){this.write(t,e,q.INFO)}debug(t,e={}){this.write(t,e,q.DEBUG)}log(t,e,n={}){this.write(e,n,t)}console(t,e={}){this.writeVerbose(t,e,q.INFO)}};v.instance=null;v.MSG_FULL="{datetime}; {level}; {version}; {os}; {browser}; {path}; {message}";var z=class{};var Q=class{};var Y=class{constructor(){this.logger=v.getInstance(),this.groups={},this.callbacks={}}addGroup(t,e){typeof this.groups[t]>"u"&&(this.groups[t]={}),this.groups[t][e]=!1}reset(t){for(let e in this.groups[t])Object.prototype.hasOwnProperty.call(this.groups[t],e)&&(this.groups[t][e]=!1)}hasOutstanding(t){if(typeof this.groups[t]>"u")return!1;for(let e in this.groups[t])if(!Object.prototype.hasOwnProperty.call(this.groups[t],e)||!this.groups[t][e])return!0;return!1}triggerSimilar(t,e="",n=null){let i=t.startsWith("/"),r=e.startsWith("/"),o={};for(let a in this.groups){let c=a.startsWith("/");i?a.match(t)&&(o[a]=[]):c&&t.match(a)?o[a]=[]:a===t&&(o[a]=[])}for(let a in o){for(let c in this.groups[a]){let d=c.startsWith("/");r?c.match(e)&&o[a].push(c):d&&e.match(c)?o[a].push(e):c===e&&o[a].push([])}o[a].length===0&&o[a].push(e)}let s=!1;for(let a in o)for(let c in o[a])s=this.trigger(a,c,n)||s;return s}trigger(t,e="",n=null){if(typeof this.callbacks[t]>"u"||Math.abs(Date.now()-this.callbacks[t].lastRun)<300||(typeof this.groups[t]<"u"&&(this.groups[t][e]=!0),this.hasOutstanding(t)))return!1;let i=this.callbacks[t].callbacks.length;this.callbacks[t].lastRun=Date.now();for(let r=0;r<i;++r)this.callbacks[t].callbacks[r](n);return this.callbacks[t].remove?this.detach(t):this.callbacks[t].reset&&this.reset(t),!0}detach(t){return this.detachCallback(t)|this.detachGroup(t)}detachCallback(t){return Object.prototype.hasOwnProperty.call(this.callbacks,t)?(delete this.callbacks[t],!0):!1}detachGroup(t){return Object.prototype.hasOwnProperty.call(this.groups,t)?(delete this.groups[t],!0):!1}attach(t,e,n=!1,i=!1){return Object.prototype.hasOwnProperty.call(this.callbacks,t)||(this.callbacks[t]={remove:n,reset:i,callbacks:[],lastRun:0}),this.callbacks[t].callbacks.push(e),!0}isAttached(t){return Object.prototype.hasOwnProperty.call(this.callbacks,t)}count(){return Object.keys(this.callbacks).length}};var X=class{constructor(){this.messages={}}add(t,e,n=null){n=typeof n<"u"?n:"any",typeof this.messages[t]>"u"&&(this.messages[t]=[]),this.messages[t][n]=e}run(t,e,n=null){n!==null&&typeof this.messages[t]<"u"&&typeof this.messages[t][n]<"u"?this.messages[t][n](e):typeof this.messages[t]<"u"?this.messages[t].null(e):v.instance.warning("Undefined type: "+t)}};var $=class{constructor(){this.accounts=[]}add(t){this.accounts[t.getId()]=t}remove(t){return typeof this.accounts[t]<"u"?(delete this.accounts[t],!0):!1}get(t){return this.accounts[t]?this.accounts[t]:null}};var I=Object.freeze({OK:"ok",INFO:"info",WARNING:"warning",ERROR:"error",HIDDEN:"hidden"});var x=class{constructor(t,e,n,i=!1,r=!1){this.status=t,this.title=e,this.message=n,this.vibrate=i,this.isSticky=r,this.primaryButton=null,this.secondaryButton=null,this.duration=3e3}};var T=Object.freeze({APP_NOTIFICATION:1,BROWSER_NOTIFICATION:2});var U=class{constructor(t={}){this.responses=t}get(t=null){return t===null?this.responses:typeof this.responses[t]>"u"?null:this.responses[t]}count(){return this.responses.length}};var W=class l{constructor(t,e,n){this.id=t.id,this.inputComponent=t,this.inputField=this.inputComponent.getElementsByClassName("input")[0],this.dropdownElement=document.getElementById(this.id+"-popup"),this.tagElement=document.getElementById(this.id+"-tags"),this.dataList=this.dropdownElement.getElementsByTagName("table")[0],this.dataListBody=this.dataList.getElementsByTagName("tbody")[0],this.dataTpl=document.getElementById(this.id+"-rowElement"),this.tagTpl=this.tagElement!==null?this.tagElement.getElementsByTagName("template")[0]:null,this.src=this.inputField.getAttribute("data-src");let i=this;this.inputField.addEventListener("focusout",function(r){(r.relatedTarget===null||r.relatedTarget.parentElement===null||r.relatedTarget.parentElement.parentElement===null||!u.hasClass(r.relatedTarget.parentElement.parentElement.parentElement,"popup"))&&u.removeClass(i.dropdownElement,"active")}),this.inputField.addEventListener("keydown",function(r){(r.keyCode===13||r.keyCode===40)&&u.preventAll(r),r.keyCode===40?(i.selectOption(i.dataListBody.firstElementChild),u.preventAll(r)):i.inputTimeDelay({id:i.id,delay:300},i.changeCallback,i,r)}),this.inputField.addEventListener("focusin",function(r){u.addClass(i.dropdownElement,"active")}),this.dropdownElement.addEventListener("keydown",function(r){u.preventAll(r),r.code==="Escape"||r.code==="Delete"||r.code==="Backspace"?(i.inputField.focus(),i.clearDataListSelection(i)):r.code==="ArrowUp"?document.activeElement.previousElementSibling!==null&&(i.clearDataListSelection(i),i.selectOption(document.activeElement.previousElementSibling)):r.code==="ArrowDown"?document.activeElement.nextElementSibling!==null&&(i.clearDataListSelection(i),i.selectOption(document.activeElement.nextElementSibling)):(r.code==="Enter"||r.code==="Tab")&&(i.clearDataListSelection(i),i.addToResultList(i,document.activeElement))}),this.dropdownElement.addEventListener("focusout",function(r){i.clearDataListSelection(i),u.removeClass(i.dropdownElement,"active")}),this.dropdownElement.addEventListener("click",function(r){document.activeElement.tagName.toLowerCase()==="tr"&&(i.clearDataListSelection(i),i.addToResultList(i,document.activeElement),u.removeClass(i.dropdownElement,"active"))}),n.observe(this.tagElement,{childList:!0,attributes:!1,subtree:!1}),e.attach(this.id+"-tags-childList",function(r){let o=r.target.querySelectorAll(".close"),s=o===null?0:o.length;s<1||o[s-1].addEventListener("click",function(a){a.target.parentNode.parentNode!==null&&a.target.parentNode.parentNode.removeChild(a.target.parentNode)})})}remoteCallback(t,e){window.omsApp.logger.log(e),e=JSON.parse(e.response)[0];let n=e.length;if(t.dropdownElement.getAttribute("data-active")==="true"){for(;t.dataListBody.firstChild;)t.dataListBody.removeChild(t.dataListBody.firstChild);for(let i=0;i<n;++i){let r=t.dataTpl.content.cloneNode(!0),o=r.querySelectorAll("[data-tpl-text]"),s=o.length;for(let a=0;a<s;++a)o[a].appendChild(document.createTextNode(u.getArray(o[a].getAttribute("data-tpl-text"),e[i])));o=r.querySelectorAll("[data-tpl-value]"),s=o.length;for(let a=0;a<s;++a)o[a].setAttribute("data-value",u.getArray(o[a].getAttribute("data-tpl-value"),e[i]));r.firstElementChild.setAttribute("data-data",JSON.stringify(e[i])),t.dataListBody.appendChild(r),t.dataListBody.lastElementChild.addEventListener("focusout",function(a){if(a.relatedTarget===null)return;let c=a.relatedTarget.parentNode.firstElementChild;do if(c===a.relatedTarget){u.preventAll(a);return}while((c=c.nextElementSibling)!==null)})}}}changeCallback(t){if(typeof t.src<"u"&&t.src!==""){let e=new N(t.src);e.setSuccess(function(n){t.remoteCallback(t,n)}),e.send()}}selectOption(t){t.focus(),t.setAttribute("style","background: #f00"),u.addClass(t,"active")}clearDataListSelection(t){let e=t.dataListBody.getElementsByTagName("tr"),n=e.length;for(let i=0;i<n;++i)e[i].setAttribute("style",""),u.removeClass(e[i],"active")}addToResultList(t,e){let n=JSON.parse(e.getAttribute("data-data"));if(t.inputField.getAttribute("data-autocomplete")==="true"&&(t.inputField.value=u.getArray(t.inputField.getAttribute("data-value"),n)),t.tagElement!==null&&t.tagElement.getAttribute("data-active")==="true"){let i=t.tagTpl.content.cloneNode(!0),r=i.querySelectorAll("[data-tpl-value]"),o=r.length,s="",a="";for(let f=0;f<o;++f)r[f].setAttribute("data-value",u.getArray(r[f].getAttribute("data-tpl-value"),n)),a=u.getArray(r[f].getAttribute("data-tpl-value"),n),s+=a;if(t.tagElement.querySelectorAll('[data-tpl-uuid="'+s+'"').length!==0)return;i.firstElementChild.setAttribute("data-tpl-uuid",s),r=i.querySelectorAll("[data-tpl-text]"),o=r.length;for(let f=0;f<o;++f)r[f].appendChild(document.createTextNode(u.getArray(r[f].getAttribute("data-tpl-text"),n)));let c=/{\/.*?}/g,d=i.firstElementChild.outerHTML.match(c),p=d===null?0:d.length;for(let f=0;f<p;++f)i.firstElementChild.outerHTML=i.firstElementChild.outerHTML.replace(d[f],u.getArray(d[f].substring(1,d[f].length-1),n));t.tagElement.childElementCount>=t.tagElement.getAttribute("data-limit")&&t.tagElement.getAttribute("data-limit")!=="0"&&t.tagElement.removeChild(t.tagElement.firstElementChild),t.tagElement.appendChild(i)}t.inputField.getAttribute("data-emptyAfter")==="true"&&(t.inputField.value=""),t.inputField.focus()}inputTimeDelay(t,e,n,i){l.timerDelay[t.id]&&(clearTimeout(l.timerDelay[t.id]),delete l.timerDelay[t.id]),l.timerDelay[t.id]=setTimeout(function(){delete l.timerDelay[t.id],e(n,i)},t.delay)}};W.timerDelay={};var G=class l{constructor(t){this.id=t.id,this.inputComponent=t,this.inputField=this.inputComponent.getElementsByClassName("input-div")[0],this.dataList=this.inputComponent.getElementsByClassName("input-datalist")[0],this.dataListBody=this.inputComponent.getElementsByClassName("input-datalist-body")[0],this.dataTpl=document.getElementsByClassName("input-data-tpl")[0],this.elementContainer=this.dataTpl.hasAttribute("data-container")?this.dataTpl.getAttribute("data-container"):"",this.src=this.inputComponent.getAttribute("data-src");let e=this;this.inputField.addEventListener("focus",function(n){e.dataList.classList.remove("vh")}),this.inputField.addEventListener("click",function(n){e.dataList.classList.remove("vh")}),this.inputField.addEventListener("focusout",function(n){setTimeout(function(){e.dataList.classList.add("vh"),e.clearDataListSelection(e),e.inputField.textContent===""&&e.inputField.setAttribute("data-value",""),e.inputField.classList.contains("required")&&e.inputField.getAttribute("data-value")===""?e.inputField.classList.add("invalid"):e.inputField.classList.remove("invalid");let i=e.dataListBody.getElementsByTagName("div"),r=i.length;if(r>0&&e.inputField.getAttribute("data-value")!==""){let o=!1;for(let s=0;s<r;++s){let a=i[s].hasAttribute("data-tpl-text")?[i[s]]:i[s].querySelectorAll("[data-tpl-text]");if(Array.from(a).map(c=>c.textContent).join(" ").trim()===e.inputField.textContent){o=!0;break}}o?e.inputField.classList.remove("invalid"):e.inputField.classList.add("invalid")}},100)}),this.inputField.addEventListener("keydown",function(n){e.dataList.classList.contains("vh")&&e.dataList.classList.remove("vh"),(n.keyCode===13||n.keyCode===40)&&u.preventAll(n),n.keyCode===40?(e.selectOption(e.dataListBody.firstElementChild),e.dataList.focus(),u.preventAll(n)):e.inputTimeDelay({id:e.id,delay:300},e.changeCallback,e,n)}),this.dataList.addEventListener("keydown",function(n){u.preventAll(n),n.code==="Escape"||n.code==="Delete"||n.code==="Backspace"?(e.inputField.focus(),e.clearDataListSelection(e)):n.code==="ArrowUp"?document.activeElement.previousElementSibling!==null&&(e.clearDataListSelection(e),e.selectOption(document.activeElement.previousElementSibling)):n.code==="ArrowDown"?document.activeElement.nextElementSibling!==null&&(e.clearDataListSelection(e),e.selectOption(document.activeElement.nextElementSibling)):(n.code==="Enter"||n.code==="Tab")&&(e.clearDataListSelection(e),e.addToResultList(e,e.elementContainer===""?document.activeElement:document.activeElement.closest("."+e.elementContainer)))}),this.dataList.addEventListener("click",function(n){e.clearDataListSelection(e),e.addToResultList(e,e.elementContainer===""?n.target:n.target.closest("."+e.elementContainer)),e.dataList.classList.add("vh")})}remoteCallback(t,e){window.omsApp.logger.log(e),e=JSON.parse(e.response)[0];let n=e.length;if(t.dataList.getAttribute("data-active")!=="true")return;for(t.inputField.textContent===""&&t.inputField.setAttribute("data-value","");t.dataListBody.firstChild;)t.dataListBody.removeChild(t.dataListBody.firstChild);let i=!1;for(let r=0;r<n;++r){let o=t.dataTpl.content.cloneNode(!0),s=o.querySelectorAll("[data-tpl-text]"),a=s.length;for(let c=0;c<a;++c)s[c].appendChild(document.createTextNode(u.getArray(s[c].getAttribute("data-tpl-text"),e[r])));s=o.querySelectorAll("[data-tpl-value]"),a=s.length;for(let c=0;c<a;++c)s[c].setAttribute("data-value",u.getArray(s[c].getAttribute("data-tpl-value"),e[r]));o.firstElementChild.setAttribute("data-data",JSON.stringify(e[r])),!i&&t.inputField.textContent===o.firstElementChild.textContent&&(o.firstElementChild.classList.add("active"),t.inputField.setAttribute("data-value",o.firstElementChild.getAttribute("data-value")),i=!0),t.dataListBody.appendChild(o)}!i&&t.inputField.getAttribute("data-value")!==""?t.inputField.classList.add("invalid"):t.inputField.classList.remove("invalid")}changeCallback(t){if(typeof t.src<"u"&&t.src!==""){let e=new N(t.src);e.addData(t.inputField.getAttribute("data-name"),t.inputField.textContent),e.addData("limit",t.inputField.getAttribute("data-limit")),e.setSuccess(function(n){t.remoteCallback(t,n)}),e.send()}}selectOption(t){t.focus(),u.addClass(t,"active")}clearDataListSelection(t){let e=t.dataListBody.getElementsByTagName("div"),n=e.length;for(let i=0;i<n;++i)u.removeClass(e[i],"active")}addToResultList(t,e){let n=JSON.parse(e.getAttribute("data-data"));t.inputField.getAttribute("data-autocomplete")==="true"&&(t.inputField.value=u.getArray(t.inputField.getAttribute("data-value"),n));let i=e.hasAttribute("data-value")?e.getAttribute("data-value"):e.querySelector("[data-value]").getAttribute("data-value"),r=e.hasAttribute("data-tpl-text")?[e]:e.querySelectorAll("[data-tpl-text]");t.inputField.setAttribute("data-value",i),t.inputField.textContent=Array.from(r).map(o=>o.textContent).join(" ").trim(),t.inputField.focus(),t.dataList.classList.add("vh")}inputTimeDelay(t,e,n,i){l.timerDelay[t.id]&&(clearTimeout(l.timerDelay[t.id]),delete l.timerDelay[t.id]),l.timerDelay[t.id]=setTimeout(function(){delete l.timerDelay[t.id],e(n,i)},t.delay)}};G.timerDelay={};var O=class{constructor(t){this.visObs=null,this.app=t}bind(t=null){let e=null;t!==null&&(e=document.getElementById(t)),this.bindHref(e),this.bindIframe(e),this.bindLazyLoad(e),this.bindInput(e)}bindHref(t=null){t=t!==null?t.querySelectorAll("[data-href], [href]"):document.querySelectorAll("[data-href], [href]");let e=t.length;for(let n=0;n<e;++n)t[n].getAttribute("data-action")===null&&t[n].addEventListener("click",function(i){if(i.target.parentElement!==this&&i.target.parentElement.getElementsByTagName("input").length>0||i.target.getElementsByTagName("input").length>0){let o=i.target.querySelector("input");if(o!==null){o.click();return}}u.preventAll(i);let r=this.getAttribute("data-href");r=r===null?this.getAttribute("href"):r,this.getAttribute("target")==="_blank"||this.getAttribute("data-target")==="_blank"||i.button===1?window.open(S.build(r),"_blank"):this.getAttribute("data-redirect")!==null?window.location.href=S.build(r):r!==null&&(window.location=S.build(r))})}bindIframe(t=null){t=t!==null?t:document.getElementsByTagName("iframe");let e=t.length;for(let n=0;n<e;++n)t[n].getAttribute("data-src")!==null&&(t[n].src=S.build(t[n].getAttribute("data-src"))),t[n].addEventListener("load",function(){let i=this.parentElement.getElementsByClassName("spinner");i.length>0&&(i[0].style.display="none")})}bindLazyLoad(t=null){t=t!==null?t.querySelectorAll("[data-lazyload]"):document.querySelectorAll("[data-lazyload]");let e=t.length;!this.visObs&&window.IntersectionObserver&&(this.visObs=new IntersectionObserver(function(n,i){n.forEach(r=>{r.intersectionRatio>0&&(i.unobserve(r.target),r.target.src=r.target.dataset.lazyload,delete r.target.dataset.lazyload)})}));for(let n=0;n<e;++n)this.visObs?this.visObs.observe(t[n]):(t[n].src=t[n].dataset.lazyload,delete t[n].dataset.lazyload)}bindInput(t=null){let e=t!==null?[t]:document.getElementsByClassName("advIpt"),n=e.length;for(let i=0;i<n;++i)new W(e[i],this.app.eventManager,this.app.uiManager.getDOMObserver());e=t!==null?[t]:document.querySelectorAll(".smart-input-wrapper"),n=e.length;for(let i=0;i<n;++i)e[i].querySelector(".input-div").hasAttribute("contenteditable")&&new G(e[i])}static setValueOfElement(t,e){if(t.hasAttribute("data-value")){t.setAttribute("data-value",e);return}let n=t.tagName.toLowerCase();if(n==="input")t.type==="radio"?(t.checked=!1,t.value===e&&(t.checked=!0)):t.type==="checkbox"?(t.checked=!1,e.split(",").includes(t.value)&&(t.checked=!0)):t.value=e;else if(n==="select"){let i=t.options.length;for(let r=0;r<i;++r)if(t.options[r].value===e){t.options[r].selected=!0;break}}else t.getAttribute("value")!==null?t.value=u.htmlspecialchars_decode(e):t.innerHTML=e}static setTextOfElement(t,e){let n=t.tagName.toLowerCase();if(n==="h1")t.innerHTML=u.htmlspecialchars_encode(e);else if(t.getAttribute("value")!==null)t.value===""&&(t.value=u.htmlspecialchars_decode(e));else if(n==="select"){let i=t.options.length;for(let r=0;r<i;++r)if(t.options[r].text===e){t.options[r].selected=!0;break}}else t.innerHTML=e}static getValueFromDataSource(t){if(t.getAttribute("data-value")!==null)return t.getAttribute("data-value");let e=t.tagName.toLowerCase();if(e==="input"||t.getAttribute("value")!==null){if(t.getAttribute("type")==="radio"){let n=document.querySelector('input[type=radio][name="'+t.name+'"]:checked');if(n===null)return"";t=n}else if(t.getAttribute("type")==="checkbox"&&!t.checked)return"";return t.value}else return e==="select"?t.options[t.selectedIndex].value:t.innerText.trim(" ")}static getTextFromDataSource(t){let e=t.tagName.toLowerCase();if(e==="input"){if(t.getAttribute("type")==="radio"){let n=document.querySelector('input[type=radio][name="'+t.name+'"]:checked');return n===null?"":document.querySelector('label[for="'+n.id+'"]').innerText.trim(" ")}else if(t.getAttribute("type")==="checkbox")return t.checked?document.querySelector('label[for="'+t.id+'"]').innerText.trim(" "):"";return t.value}else return e==="select"?t.options[t.selectedIndex].text:t.getAttribute("value")!==null?t.value:t.innerHTML.trim(" ")}};var Z=class l{constructor(t){this.app=t,this.forms={},this.ignore={}}get(t){return Object.prototype.hasOwnProperty.call(this.forms,t)||this.bind(t),this.forms[t]}hasChanges(){let t=this.forms.length;for(let e=0;e<t;++e)if(this.forms[e].hasChange())return!0;return!1}isIgnored(t){return this.ignore.indexOf(t)!==-1}bind(t=null){if(t!==null&&typeof this.ignore[t]>"u"){this.bindForm(t);return}let e=document.querySelectorAll("form, [data-tag=form]"),n=e?e.length:0;for(let i=0;i<n;++i){let r=e[i].getAttribute("id");typeof r<"u"&&r!==null&&typeof this.ignore[r]>"u"?this.bindForm(r):v.instance.info("A form doesn't have an ID.")}}bindForm(t=null){if(t===null){v.instance.info("A form doesn't have an ID.");return}this.forms[t]=new B(t);let e=this,n=0,i=this.forms[t].getElementsToBind(),r=i.length;for(let s=0;s<r;++s)i[s].addEventListener("click",function(a){e.formActions(e,a,t)}),this.forms[t].isOnChange()||i[s].addEventListener("change",function(){window.omsApp.state&&(window.omsApp.state.hasChanges=!0)});let o=this.forms[t].getImagePreviews();n=o===null?0:o.length;for(let s=0;s<n;++s)this.bindImagePreview(o[s],t);if(this.forms[t].isOnChange()){let s=this.forms[t].getFormElement().getAttribute("data-ui-container");(s!==null?this.forms[t].getFormElement().querySelector(s):this.forms[t].getFormElement()).addEventListener("change",function(c){u.preventAll(c),window.omsApp.state&&(window.omsApp.state.hasChanges=!0);let d=c.target.tagName.toLowerCase();if(d==="input"||d==="textarea"){let p=null;e.forms[t].getFormElement().tagName.toLowerCase()==="table"&&(p=c.srcElement.closest(e.forms[t].getFormElement().getAttribute("data-ui-element"))),e.submit(e.forms[t],null,p,"post")}})}}formActionRemove(t,e,n,i){u.preventAll(e);let r=t.forms[n].getRemove()[i],o=function(a=null){if(a!==null&&a.status!==200){t.app.notifyManager.send(new x(I.ERROR,"Failure","Some failure happened"),T.APP_NOTIFICATION);return}let c=r.closest(document.getElementById(n).getAttribute("data-ui-element"));window.omsApp.logger.log(document.getElementById(n).getAttribute("data-ui-element")),c.parentNode.removeChild(c)},s=document.getElementById(n).getAttribute("action")!==null||document.getElementById(n).getAttribute("data-action")!==null?t.forms[n].getFormElement():document.getElementById(n).getAttribute("data-update-form")!==null?t.forms[document.getElementById(n).getAttribute("data-update-form")].getFormElement():document.getElementById(n).getAttribute("data-delete-form")!==null?t.forms[document.getElementById(n).getAttribute("data-delete-form")].getFormElement():null;if(s!==null){let a=new N(s.hasAttribute("data-action-delete")?s.getAttribute("data-action-delete"):s.tagName.toLowerCase()!=="form"?s.getAttribute("data-action"):s.getAttribute("action"),R.DELETE);a.setResultCallback(0,o),a.send()}else o()}formActionAdd(t,e,n,i){u.preventAll(e),t.forms[n].isValid()&&(document.getElementById(n).getAttribute("data-add-form")===null?this.formActionAddInline(t,e,n,i):this.formActionAddExternal(t,e,n,i))}formActionAddInline(t,e,n,i){let r=t.forms[n].getFormElement(),o=r.getAttribute("data-ui-container"),s=o.charAt(0)==="#"?document.querySelector(o):r.querySelector(o);if(r.getAttribute("data-update-tpl")){let a=s.querySelector(r.getAttribute("data-update-tpl")).content.cloneNode(!0);s.appendChild(a.firstElementChild)}else{let a=s.querySelector(r.getAttribute("data-add-tpl")).content.cloneNode(!0);s.appendChild(a.firstElementChild)}}formActionAddExternal(t,e,n,i){let r=t.forms[n].getFormElement(),o=r.getAttribute("data-ui-container"),s=o.charAt(0)==="#"?document.querySelector(o):r.querySelector(o),a=r.getAttribute("data-add-tpl").split(","),c=a.length,d=[],p=[],f=[];for(let m=0;m<c;++m){f.push(document.querySelector(a[m]).content.cloneNode(!0));let b=f[m].querySelector("[data-tpl-value]").getAttribute("data-tpl-value"),h=b.startsWith("http")||b.startsWith("{")?f[m].firstElementChild:r;d=d.concat(h.hasAttribute("data-tpl-value")?h:Array.prototype.slice.call(h.querySelectorAll("[data-tpl-value]"))),p=p.concat(h.hasAttribute("data-tpl-text")?h:Array.prototype.slice.call(h.querySelectorAll("[data-tpl-text]"))),l.setRandomIdForElement(f[m].firstElementChild)}let g={};t.forms[n].setSuccess(function(m,b){if(b.status===200){l.setDataInElement("value",f,d,g),l.setDataInElement("text",f,p,g);for(let h=0;h<c;++h)s.appendChild(f[h].firstElementChild);window.omsApp.logger.log(g),S.setQuery("$id",m.get("response").id),l.setDataFromRemoteUrls(g),t.forms[n].resetValues()}}),t.submit(t.forms[n],t.forms[n].getAdd()[i])}formActionSave(t,e,n,i){u.preventAll(e),document.querySelector('[data-update-form="'+n+'"')===null?this.formActionSaveInline(t,e,n,i):this.formActionSaveExternal(t,e,n,i)}formActionSaveInline(t,e,n,i){if(!t.forms[n].isValid())return;let r=t.forms[n].getFormElement(),o=r.getAttribute("data-ui-container"),s=o.charAt(0)==="#"?document.querySelector(o):r.querySelector(o),a=r.getAttribute("data-ui-element").split(","),c=a.length,d=[],p=e.target.closest(r.getAttribute("data-ui-element")),f=[],g=[];if(p.getAttribute("data-id")===null||p.getAttribute("data-id")===""){let m=r.getAttribute("data-add-tpl").split(","),b=m.length,h=[];for(let y=0;y<b;++y){h.push(document.querySelector(m[y]).content.cloneNode(!0));let A=h[y].querySelector("[data-tpl-value]").getAttribute("data-tpl-value"),E=A.startsWith("http")||A.startsWith("{")?h[y].firstElementChild:p;f=f.concat(E.hasAttribute("data-tpl-value")?E:Array.prototype.slice.call(E.querySelectorAll("[data-tpl-value]"))),g=g.concat(E.hasAttribute("data-tpl-text")?E:Array.prototype.slice.call(E.querySelectorAll("[data-tpl-text]"))),l.setRandomIdForElement(h[y].firstElementChild)}let w={};t.forms[n].setSuccess(function(y,A){if(A.status===200){l.setDataInElement("value",h,f,w),l.setDataInElement("text",h,g,w);for(let E=0;E<b;++E)s.appendChild(h[E].firstElementChild);p.parentNode.removeChild(p),window.omsApp.logger.log(w),S.setQuery("$id",y.get("response").id),l.setDataFromRemoteUrls(w)}})}else{for(let h=0;h<c;++h){a[h]=a[h].trim(),d.push(r.querySelector(a[h]+'[data-id="'+p.getAttribute("data-id")+'"]'));let w=d[h].querySelector("[data-tpl-value]").getAttribute("data-tpl-value"),y=w.startsWith("http")||w.startsWith("{")?d[h].firstElementChild:p;f=f.concat(y.hasAttribute("data-tpl-value")?y:Array.prototype.slice.call(y.querySelectorAll("[data-tpl-value]"))),g=g.concat(y.hasAttribute("data-tpl-text")?y:Array.prototype.slice.call(y.querySelectorAll("[data-tpl-text]")))}let m=s.querySelector('.vh[data-id="'+p.getAttribute("data-id")+'"]'),b={};u.removeClass(m,"vh"),t.forms[n].setSuccess(function(h,w){w.status===200&&(l.setDataInElement("value",[m],f,b),l.setDataInElement("text",[m],g,b),p.parentNode.removeChild(p),l.setDataFromRemoteUrls(b))})}}formActionSaveExternal(t,e,n,i){let r=document.querySelector('[data-update-form="'+n+'"'),o=n;if(n=r.getAttribute("id"),!t.forms[n].isValid())return;let s=t.forms[n].getFormElement(),a=t.forms[o].getFormElement(),c=s.getAttribute("data-ui-element").split(","),d=c.length,p=[],f=[],g=[];for(let A=0;A<d;++A){c[A]=c[A].trim(),p.push(s.querySelector(c[A]+'[data-id="'+a.getAttribute("data-id")+'"]'));let E=p[A].querySelector("[data-tpl-value]").getAttribute("data-tpl-value"),C=E.startsWith("http")||E.startsWith("{")?p[A].firstElementChild:a;f=f.concat(C.hasAttribute("data-tpl-value")?C:Array.prototype.slice.call(C.querySelectorAll("[data-tpl-value]"))),g=g.concat(C.hasAttribute("data-tpl-text")?C:Array.prototype.slice.call(C.querySelectorAll("[data-tpl-text]")))}let m={};for(let A=0;A<d;++A)u.removeClass(p[A],"animated"),u.removeClass(p[A],"greenCircleFade"),window.requestAnimationFrame(E=>{window.requestAnimationFrame(C=>{u.addClass(p[A],"animated"),u.addClass(p[A],"medium-duration"),u.addClass(p[A],"greenCircleFade")})});t.forms[o].setSuccess(function(A,E){if(E.status!==200){t.forms[o].resetValues();return}l.setDataInElement("value",p,f,m),l.setDataInElement("text",p,g,m),l.setDataFromRemoteUrls(m);for(let C=0;C<d;++C)u.removeClass(p[C],"animated"),u.removeClass(p[C],"greenCircleFade"),u.removeClass(p[C],"medium-duration"),window.requestAnimationFrame(jt=>{window.requestAnimationFrame(Pt=>{u.addClass(p[C],"animated medium-duration greenCircleFade")})});t.forms[o].resetValues()}),a.setAttribute("data-id",""),t.submit(t.forms[o],t.forms[o].getSave()[i]);let b=t.forms[o].getAdd(),h=b.length;for(let A=0;A<h;++A)u.removeClass(b[A],"vh");let w=t.forms[o].getSave();h=w.length;for(let A=0;A<h;++A)u.addClass(w[A],"vh");let y=t.forms[o].getCancel();h=y.length;for(let A=0;A<h;++A)u.addClass(y[A],"vh")}formActionCancel(t,e,n,i){let r=document.getElementById(n);r.getAttribute("data-update-form")===null&&r.getAttribute("data-ui-container")!==null&&r.getAttribute("data-ui-element")!==null?this.formActionCancelInline(t,e,n,i):this.formActionCancelExternal(t,e,n,i)}formActionCancelInline(t,e,n,i){let r=t.forms[n].getFormElement(),o=r.getAttribute("data-ui-container"),s=o.charAt(0)==="#"?document.querySelector(o):r.querySelector(o),a=e.target.closest(r.getAttribute("data-ui-element")),c=s.querySelector('.vh[data-id="'+a.getAttribute("data-id")+'"]');u.removeClass(c,"vh"),a.parentNode.removeChild(a)}formActionCancelExternal(t,e,n,i){t.forms[n].resetValues(),t.forms[n].getFormElement().setAttribute("data-id","");let r=0,o=t.forms[n].getAdd();r=o.length;for(let c=0;c<r;++c)u.removeClass(o[c],"vh");let s=t.forms[n].getSave();r=s.length;for(let c=0;c<r;++c)u.addClass(s[c],"vh");let a=t.forms[n].getCancel();r=a.length;for(let c=0;c<r;++c)u.addClass(a[c],"vh")}formActionUpdate(t,e,n,i){u.preventAll(e),document.getElementById(n).getAttribute("data-update-form")===null?this.formActionUpdateInline(t,e,n,i):this.formActionUpdateExternal(t,e,n,i)}formActionUpdateInline(t,e,n,i){let r=t.forms[n].getFormElement(),o=r.getAttribute("data-ui-container"),s=e.target.closest(r.getAttribute("data-ui-element"));s===null&&(s=r.querySelector(r.getAttribute("data-ui-element"))),u.addClass(s,"vh");let a=s.querySelectorAll("[data-tpl-value]"),c=s.querySelectorAll("[data-tpl-text]"),d=o.charAt(0)==="#"?document.querySelector(o):r.querySelector(o),p=r.getAttribute("data-update-tpl").split(","),f=p.length,g=[];for(let y=0;y<f;++y)g.push(document.querySelector(p[y]).content.cloneNode(!0)),g[y].firstElementChild.setAttribute("data-id",s.getAttribute("data-id"));let m={};l.setDataInElement("value",g,a,m),l.setDataInElement("text",g,c,m);for(let y=0;y<f;++y)d.insertBefore(g[y].firstElementChild,s);let b=t.forms[n].getSave(),h=b.length;for(let y=0;y<h;++y)u.removeClass(b[y],"vh");let w=t.forms[n].getCancel();h=w.length;for(let y=0;y<h;++y)u.removeClass(w[y],"vh");t.forms[n].setSuccess(function(y){y.get("status")!=="undefined"&&y.get("status")!==I.HIDDEN&&t.app.notifyManager.send(new x(y.get("status"),y.get("title"),y.get("message")),T.APP_NOTIFICATION),window.omsApp.logger.log(m),S.setQuery("$id",y.get("response").id),l.setDataFromRemoteUrls(m)})}formActionUpdateExternal(t,e,n,i){let r=t.forms[n].getFormElement(),o=e.target.closest(r.getAttribute("data-ui-element")),s=r.getAttribute("data-update-form"),a=o.querySelectorAll("[data-tpl-value]"),c=o.querySelectorAll("[data-tpl-text]"),d=0;t.forms[s].resetValues(),t.forms[s].getFormElement().setAttribute("data-id",o.getAttribute("data-id"));let p=t.forms[s].getAdd();d=p.length;for(let h=0;h<d;++h)u.addClass(p[h],"vh");let f=t.forms[s].getSave();d=f.length;for(let h=0;h<d;++h)u.removeClass(f[h],"vh");let g=t.forms[s].getCancel();d=g.length;for(let h=0;h<d;++h)u.removeClass(g[h],"vh");let m={};l.insertDataIntoForm(t,"value",s,a,m),d=c.length;let b=a.length;for(let h=0;h<d;++h)if(c[h].tagName.toLowerCase()==="select"){for(let y=0;y<b;++y)if(a[y].getAttribute("name")===c[h].getAttribute("name")){c[h]=null;break}}l.insertDataIntoForm(t,"text",s,c,m),t.forms[s].setSuccess(function(h){h.get("status")!=="undefined"&&h.get("status")!==I.HIDDEN&&t.app.notifyManager.send(new x(h.get("status"),h.get("title"),h.get("message")),T.APP_NOTIFICATION),window.omsApp.logger.log(m),S.setQuery("$id",h.get("response").id),l.setDataFromRemoteUrls(m)})}formActions(t,e,n){let i=0;(i=Array.from(t.forms[n].getRemove()).indexOf(e.target))!==-1?this.formActionRemove(t,e,n,i):(i=Array.from(t.forms[n].getAdd()).indexOf(e.target))!==-1?this.formActionAdd(t,e,n,i):(i=Array.from(t.forms[n].getSave()).indexOf(e.target))!==-1?this.formActionSave(t,e,n,i):(i=Array.from(t.forms[n].getCancel()).indexOf(e.target))!==-1?(u.preventAll(e),this.formActionCancel(t,e,n,i)):(i=Array.from(t.forms[n].getUpdate()).indexOf(e.target))!==-1?this.formActionUpdate(t,e,n,i):((i=Array.from(t.forms[n].getSubmit()).indexOf(e.target))!==-1||(i=Array.from(t.forms[n].getSubmit()).indexOf(e.target.parentNode))!==-1)&&(u.preventAll(e),t.submit(t.forms[n],t.forms[n].getSubmit()[i]))}bindImagePreview(t,e){t.addEventListener("change",function(){let n=document.querySelector("#preview-"+t.getAttribute("name"));n.src=window.URL.createObjectURL(t.files[0]),n.onload=function(){window.URL.revokeObjectURL(this.src)}})}submit(t,e=null,n=null,i=null,r=null){let o=this,s=t.getSubmitInjects(),a=0;e!==null&&(r=e.getAttribute("formaction")),e!==null&&(i=e.getAttribute("formmethod")),this.app.eventManager.isAttached(t.getId())||this.app.eventManager.attach(t.getId(),function(){o.submitForm(t,r,i,n)},!0);for(let d in s)if(Object.prototype.hasOwnProperty.call(s,d)){if(++a,s[d](t,t.getId())===!1)return}else v.instance.warning("Invalid property.");a<1&&this.app.eventManager.trigger(t.getId());let c=t.getFirstInputElement();c!==null&&c.focus()}submitForm(t,e=null,n=null,i=null){let r=t.getData(i);if(!t.isValid(r)){this.app.notifyManager.send(new x(I.INFO,u.lang.Info,u.lang.invalid_form),T.APP_NOTIFICATION),v.instance.debug('Form "'+t.getId()+'" has invalid values.');return}if(t.getMethod()!==R.GET&&Math.abs(Date.now()-t.getLastSubmit())<500)return;t.updateLastSubmit();let o=new N,s=this,a=t.getFormElement().getAttribute("data-redirect");if(t.getMethod()==="GET_REDIRECT"){let c=t.getAction();for(let d of r)c+="&"+d[0]+"="+d[1];window.location.href=c;return}o.setData(r),o.setType(L.FORM_DATA),o.setUri(e!==null?e:t.getAction()),o.setMethod(n!==null?n:t.getMethod()),o.setResultCallback(0,function(c){window.omsApp.logger.log(c.response);let d=c.getResponseHeader("location");d!==null&&(window.location=d);let p=null,f=null,g=c.getResponseHeader("content-type");if(g!==null&&g.includes("application/octet-stream")){f=new Blob([c.response],{type:"application/octet-stream"});let m=document.createElement("a");m.style="display: none",document.body.appendChild(m);let b=window.URL.createObjectURL(f);m.href=b;let h=c.getResponseHeader("content-disposition"),w="";if(h&&h.indexOf("attachment")!==-1){let A=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(h);A!==null&&A[1]&&(w=A[1].replace(/['"]/g,""))}m.download=w,m.click(),window.URL.revokeObjectURL(b),document.body.removeChild(m)}else if(g.includes("text/html"))f=c.response,document.documentElement.innerHTML=c.response,window.omsApp.reInit();else try{f=JSON.parse(c.response);let m=new U(f[0]),b=null;p=parseInt(c.getResponseHeader("status")),(b=t.getSuccess())!==null&&(p===200||p===null)&&(b(m,c),t.setSuccess(null)),m.get("type")!==null?s.app.responseManager.run(m.get("type"),m.get(),null):typeof f[0].status<"u"&&f[0].status!==I.HIDDEN&&s.app.notifyManager.send(new x(f[0].status,f[0].title,f[0].message),T.APP_NOTIFICATION)}catch(m){v.instance.log(m),v.instance.error(`Invalid form response. 
URL: `+t.getAction()+`
Request: `+JSON.stringify(t.getData())+`
Response: `+c.response),s.app.notifyManager.send(new x(I.ERROR,"Failure","Some failure happened"),T.APP_NOTIFICATION),p=400}if(a!==null&&(p===200||p===null)){let m=S.build(a,f);fetch(m).then(b=>b.text()).then(b=>{document.documentElement.innerHTML=b,window.omsApp.state&&(window.omsApp.state.hasChanges=!1),history.pushState({},null,m),window.omsApp.reInit()}).catch(b=>{console.warn(b)})}}),window.omsApp.state&&(window.omsApp.state.hasChanges=!1),o.send(),t.getFinally()!==null&&t.getFinally()()}count(){return this.forms.length}static setDataFromRemoteUrls(t){for(let e in t){let n=new N(e);n.setResultCallback(200,function(i){let r=t[e].length;for(let o=0;o<r;++o){let s=t[e][o].path;t[e][o].type==="value"?O.setValueOfElement(t[e][o].element,s!==null?u.getArray(s,JSON.parse(i.response)):i.response):O.setTextOfElement(t[e][o].element,s!==null?u.getArray(s,JSON.parse(i.response)):i.response)}}),n.send()}}static setRandomIdForElement(t){if(t.getAttribute("data-id")!==null&&t.getAttribute("data-id")!=="")return;let e="";do e="r-"+Math.random().toString(36).substring(7);while(document.querySelector('[data-id="'+e+'"]')!==null);return t.setAttribute("data-id",e),e}static setDataInElement(t,e,n,i={}){let r=[],o=n.length,s=e.length;for(let a=0;a<o;++a){let c=n[a].hasAttribute("data-tpl-"+t+"-path")?n[a].getAttribute("data-tpl-"+t+"-path"):null;for(let d=0;d<s;++d){let p=e[d]instanceof DocumentFragment?e[d].firstElementChild:e[d],f=p.hasAttribute("data-tpl-"+t)&&p.getAttribute("data-tpl-"+t)===n[a].getAttribute("data-tpl-"+t)?[p]:p.querySelectorAll("[data-tpl-"+t+'="'+n[a].getAttribute("data-tpl-"+t)+'"'),g=f.length;for(let m=0;m<g;++m)r.includes(f[m])||c!==null&&c!==f[m].getAttribute("data-tpl-"+t+"-path")||(r.push(f[m]),n[a].getAttribute("data-tpl-"+t).startsWith("http")||n[a].getAttribute("data-tpl-"+t).startsWith("{")?l.populateRemoteUrls(f[m],t,n[a],c,i):t==="value"?O.setValueOfElement(f[m],O.getValueFromDataSource(n[a])):t==="text"&&O.setTextOfElement(f[m],O.getTextFromDataSource(n[a])))}}}static insertDataIntoForm(t,e,n,i,r={}){let o=i.length;for(let s=0;s<o;++s){if(i[s]===null)continue;let a=t.forms[n].getFormElement().querySelectorAll("[data-tpl-"+e+'="'+i[s].getAttribute("data-tpl-"+e)+'"'),c=i[s].hasAttribute("data-tpl-"+e+"-path")?i[s].getAttribute("data-tpl-"+e+"-path"):null,d=a.length;for(let p=0;p<d;++p)i[s].getAttribute("data-tpl-"+e).startsWith("http")||i[s].getAttribute("data-tpl-"+e).startsWith("{")?l.populateRemoteUrls(a[p],e,i[s],c,r):e==="value"?O.setValueOfElement(a[p],O.getValueFromDataSource(i[s])):e==="text"&&(i[s].getAttribute("data-tpl-text")!==i[s].getAttribute("data-tpl-value")||i[s].getAttribute("data-value")!==null)&&O.setTextOfElement(a[p],O.getTextFromDataSource(i[s]))}}static populateRemoteUrls(t,e,n,i,r){let o=n.getAttribute("data-tpl-"+e).startsWith("/")?document.getElementsByTagName("base")[0].href:"";r[o+n.getAttribute("data-tpl-"+e)]===void 0&&(r[o+n.getAttribute("data-tpl-"+e)]=[]),r[o+n.getAttribute("data-tpl-"+e)].push({path:i,element:t,type:e})}};var _=class{constructor(t){this.app=t}bind(t=null){if(t!==null){let i=document.getElementById(t);i&&this.bindElement(i);return}let e=document.getElementsByClassName("tabview"),n=e?e.length:0;for(let i=0;i<n;++i)this.bindElement(e[i])}bindElement(t){let e=t.querySelectorAll(".tab-links li"),n=e.length;for(let i=0;i<n;++i)e[i].addEventListener("click",function(r){let o=this.querySelector("label").getAttribute("for"),s=this.parentNode.getElementsByClassName("active");if(s.length>0){let c=o.split("&"),d=c.indexOf(s[0].getElementsByTagName("label")[0].getAttribute("for"));d>-1&&c.splice(d,1),o=c.join("&"),u.removeClass(s[0],"active")}o=o.split("&").join("&"),u.addClass(this,"active"),u.hasClass(this.closest(".tabview"),"url-rewrite")&&window.history.replaceState(null,"",S.build("{%}#"+(o===""?"":o)))});this.activateTabUri(t)}activateTabUri(t){let e=window.location.href.includes("#")?k.parseUrl(window.location.href).fragment:"";if(e===null||typeof e>"u")return;let n=e.split("&"),i=n.length;if(i>0&&e!=="")for(let r=0;r<i;++r){let o=t.querySelector('label[for="'+n[r]+'"]');typeof o<"u"&&o!==null&&o.click()}t.querySelector(".tab-links")?.querySelector(".active")===null&&t.querySelector(".tab-links").querySelector("label").click()}};var tt=class{constructor(t){this.id=t,this.table=null}bind(){this.table=document.getElementById(this.id)}serialize(){let t=document.getElementById(this.id),e={caption:null,header:[],rows:[]};e.caption=t.getElementsByTagName("caption")[0].innerText;let n=t.querySelectorAll("thead tr td, thead tr th"),i=n.length;for(let s=0;s<i;++s)e.header.push(n[s].innerText);let r=t.querySelectorAll("tbody tr"),o=r.length;for(let s=0;s<o;++s){e.rows[s]=[];let a=r[s].querySelectorAll("td, th"),c=a.length;for(let d=0;d<c;++d)e.rows[s].push(a[d].innerText)}return e}getExport(){return document.querySelectorAll("#"+this.id+" .download")[0]}getSorting(){return document.querySelectorAll("#"+this.id+" thead .sort-asc, #"+this.id+" thead .sort-desc")}getFilter(){return document.querySelectorAll("#"+this.id+" .filter")}getHeader(){return document.querySelector("#"+this.id+" thead")}getCheckboxes(){return document.querySelectorAll("#"+this.id+" thead input[type=checkbox]")}getSortableRows(){return document.querySelectorAll("#"+this.id+" tbody .order-up, #"+this.id+" tbody .order-down")}};var Nt=Object.freeze({TEXT:"text",JSON:"json",DOCUMENT:"document",BLOB:"blob",ARRAYBUFFER:"arraybuffer",DEFAULT:""});var et=class l{constructor(t){this.app=t,this.tables={},this.ignore={}}bind(t=null){if(t!==null&&typeof this.ignore[t]>"u"){this.bindTable(t);return}let e=document.getElementsByTagName("table"),n=e?e.length:0;for(let i=0;i<n;++i){let r=e[i].getAttribute("id");typeof r<"u"&&r!==null&&typeof this.ignore[r]>"u"&&this.bindTable(r)}}bindTable(t=null){if(t===null){u.Log.Logger.instance.info("A table doesn't have an ID.");return}this.tables[t]=new tt(t),this.bindExport(this.tables[t]);let e=this.tables[t].getSorting(),n=e.length;for(let s=0;s<n;++s)this.bindSorting(e[s],t);let i=this.tables[t].getFilter();n=i.length;for(let s=0;s<n;++s)this.bindFiltering(i[s],t);let r=this.tables[t].getCheckboxes();n=r.length;for(let s=0;s<n;++s)this.bindCheckbox(r[s],t);let o=this.tables[t].getHeader();this.bindColumnVisibility(o,t)}bindExport(t){let e=t.getExport();typeof e>"u"||e===null||e.addEventListener("click",function(n){window.omsApp.logger.log(t.serialize())})}bindColumnVisibility(t){let e=this,n=t.querySelectorAll("td"),i=n.length;for(let r=0;r<i;++r){let o=JSON.parse(window.localStorage.getItem("ui-state-"+this.id+"-header-"+r)),s=t.parentElement.getElementsByTagName("tr"),a=s.length;if(o==="1"&&!u.hasClass(n[r],"vh"))for(let c=0;c<a;++c){let d=s[c].getElementsByTagName("td");d.length<i||u.addClass(d[r],"vh")}else if((o==="0"||o===null)&&u.hasClass(n[r],"vh"))for(let c=0;c<a;++c){let d=s[c].getElementsByTagName("td");d.length<i||u.removeClass(d[r],"vh")}}t.addEventListener("contextmenu",function(r){if(u.preventAll(r),document.getElementById("table-ctx-menu")!==null)return;let o=document.getElementById("table-ctx-menu-tpl");if(o===null)return;let s=document.importNode(o.content,!0);o.parentNode.appendChild(s);let a=document.getElementById("table-ctx-menu"),c=t.querySelectorAll("td"),d=c.length,p=a.getElementsByClassName("context-line")[0].cloneNode(!0);for(let g=0;g<d;++g){if(c[g].firstElementChild.innerText.trim()==="")continue;let m=p.cloneNode(!0),b=m.firstElementChild.getAttribute("get")+g;m.firstElementChild.setAttribute("for",b),m.firstElementChild.firstElementChild.setAttribute("id",b),m.firstElementChild.appendChild(document.createTextNode(c[g].firstElementChild.innerText.trim()));let h=u.hasClass(c[g],"vh");a.getElementsByTagName("ul")[0].appendChild(m),a.querySelector("ul").lastElementChild.querySelector('input[type="checkbox"]').checked=!h,a.querySelector("ul").lastElementChild.querySelector('input[type="checkbox"]').addEventListener("change",function(){let w=t.parentElement.getElementsByTagName("tr"),y=w.length,A=u.hasClass(c[g],"vh");A?window.localStorage.setItem("ui-state-"+e.id+"-header-"+g,JSON.stringify("0")):window.localStorage.setItem("ui-state-"+e.id+"-header-"+g,JSON.stringify("1"));for(let E=0;E<y;++E){let C=w[E].getElementsByTagName("td");A?u.removeClass(C[g],"vh"):u.addClass(C[g],"vh")}})}a.getElementsByTagName("ul")[0].removeChild(a.getElementsByClassName("context-line")[0]);let f=o.parentElement.getBoundingClientRect();a.style.top=r.clientY-f.top+"px",a.style.left=r.clientX-f.left+"px",document.addEventListener("click",l.hideMenuClickHandler)})}static hideMenuClickHandler(t){let e=document.getElementById("table-ctx-menu");!e.contains(t.target)&&(e.parentNode.removeChild(e),document.removeEventListener("click",l.hideMenuClickHandler))}bindSorting(t,e){t.addEventListener("click",function(n){if(this.firstElementChild===null||this.firstElementChild.tagName.toLowerCase()==="a")return;let i=document.getElementById(e),r=i.getElementsByTagName("tbody")[0].rows,o=r.length,s=this.closest("td").cellIndex,a=u.hasClass(this,"sort-asc")?1:-1,c,d,p,f,g,m,b=!1,h=!1,w=this.closest("td").getAttribute("data-name");if(i.setAttribute("data-sorting",(a>0?"+":"-")+(w!==null?w:s)),i.getAttribute("data-src")!==null){l.getRemoteData(i);return}do{for(b=!1,c=0;c<o-1;++c){for(h=!1,p=r[c].getElementsByTagName("td")[s],g=p.getAttribute("data-content")!==null?p.getAttribute("data-content").toLowerCase():p.textContent.toLowerCase(),g=isNaN(g)?isNaN(new Date(g))?g:new Date(g):parseFloat(g),d=c+1;d<o;++d)if(f=r[d].getElementsByTagName("td")[s],m=f.getAttribute("data-content")!==null?f.getAttribute("data-content").toLowerCase():f.textContent.toLowerCase(),m=isNaN(m)?isNaN(new Date(m))?m:new Date(m):parseFloat(m),a===1&&g>m){h=!0;break}else if(a===-1&&g<m){h=!0;break}if(h===!0)break}h&&(r[c].parentNode.insertBefore(r[d],r[c]),b=!0)}while(b)})}bindFiltering(t,e){t.addEventListener("click",function(n){})}bindCheckbox(t,e){t.addEventListener("click",function(n){let i=t.closest("td").cellIndex,r=t.closest("table").querySelectorAll("tbody tr"),o=r.length,s=t.checked;for(let a=0;a<o&&!(typeof r[a].cells[i]>"u");++a){let c=r[a].cells[i].querySelector("input[type=checkbox]");c!==null&&(c.checked=s)}})}static getRemoteData(t){let e={limit:t.getAttribute("data-limit"),offset:t.getAttribute("data-offset"),sorting:t.getAttribute("data-sorting"),filter:t.getAttribute("data-filter")},n=new N;n.setData(e),n.setType(Nt.JSON),n.setUri(t.getAttribute("data-src")),n.setMethod("GET"),n.setRequestHeader("Content-Type","application/json"),n.setSuccess(function(i){l.emptyTable(t.getElementsByTagName("tbody")[0]),l.addToTable(t.getElementsByTagName("tbody")[0],JSON.parse(i.response)[0])}),n.send()}static emptyTable(t){let e=t.getElementsByTagName("tr"),n=e.length;for(let i=0;i<n;++i)e[i].parentNode.removeChild(e[i])}static addToTable(t,e){let n=e.length;console.table(e);for(let i=0;i<n;++i){let r=t.getElementsByTagName("template")[0].content.cloneNode(!0),o=r.querySelectorAll("[data-tpl-text]"),s=o.length;for(let a=0;a<s;++a)o[a].appendChild(document.createTextNode(u.getArray(o[a].getAttribute("data-tpl-text"),e[i])));o=r.querySelectorAll("[data-tpl-value]"),s=o.length;for(let a=0;a<s;++a)o[a].setAttribute("data-value",u.getArray(o[a].getAttribute("data-tpl-value"),e[i]));t.appendChild(r)}}};var nt=class{constructor(t){this.logger=v.getInstance(),this.app=t,this.actions={}}bind(t=null){let e=t==null?document.querySelectorAll("[data-action]"):typeof t.length<"u"?t:[t],n=e.length;for(let i=0;i<n;++i)e[i]!==null&&e[i].hasAttribute("data-action")&&this.bindElement(e[i])}bindElement(t){if(!u.isValidJson(t.getAttribute("data-action"))){this.logger.error("Invalid json string: '"+t.getAttribute("data-action")+"'");return}let e=JSON.parse(t.getAttribute("data-action")),n=e.length,i=this;for(let r=0;r<n;++r){let o=[t],s=!1;Object.prototype.hasOwnProperty.call(e[r],"selector")&&(o=document.querySelectorAll(e[r].selector),s=!0);let a=o.length;for(let d=0;d<a;++d)this.bindListener(o[d].id,e[r]);let c={childList:!1,attributes:!0,subtree:!1};s&&(this.app.eventManager.attach(t.id+"-childList",function(d){let p=d.addedNodes.length;for(let f=0;f<p;++f)i.bindListener(d.addedNodes[f].id,e[r],typeof e[r].autoremove<"u"?e[r].autoremove:!1)}),c.childList=!0,c.subtree=!0),this.app.eventManager.attach(t.id+"-attributes",function(d){}),this.app.uiManager.getDOMObserver().observe(t,c)}}bindListener(t,e,n=!1){let i=this,r=e.action.length;for(let o=1;o<r;++o){if(typeof t>"u"||typeof e.key>"u"){this.logger.error("Invalid element id/key: "+t+"/"+e.key);return}if(this.app.eventManager.isAttached(t+"-"+e.key+"-"+e.action[o-1].key))return;this.app.eventManager.attach(t+"-"+e.key+"-"+e.action[o-1].key,function(s){i.runAction(t,e,e.action[o],s)},n,!0)}document.getElementById(t).addEventListener(e.listener,function(o){e.preventDefault&&u.preventAll(o),i.runAction(this.id,e,e.action[0],o)},!1)}runAction(t,e,n,i){let r=this;if(!Object.prototype.hasOwnProperty.call(this.actions,n.type)){this.logger.warning("Undefined action "+n.type);return}n.data=i,this.actions[n.type](n,function(o){r.app.eventManager.trigger(t+"-"+e.key+"-"+n.key,t,o)},t)}add(t,e){this.actions[t]=e}};var it=class{constructor(t){this.app=t,this.draggable={},this.dragging=null}bind(t=null){if(t!==null)this.bindElement(t);else{let e=document.querySelectorAll(".oms-dragcontainer"),n=e?e.length:0;for(let i=0;i<n;++i)this.bindElement(e[i])}}bindElement(t){let e=this;t&&(t.addEventListener("dragstart",function(n){e.dragging===null&&(e.dragging=n.target,n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text/html",n.target.innerHTML))},!1),t.addEventListener("dragenter",function(n){let i=n.target.closest(".oms-dragcontainer "+this.children[this.children.length-1].tagName),r=Array.from(this.children).indexOf(i),o=Array.from(e.dragging.children).indexOf(e.dragging),s=this.querySelector(".oms-drag-placeholder");s!==null&&this.removeChild(s);let a=document.createElement(e.dragging.tagName);if(e.dragging.tagName.toLowerCase()==="tr"){let c=document.createElement("td");c.setAttribute("colspan",42),a.appendChild(c)}a.setAttribute("draggable","true"),u.addClass(a,"oms-drag-placeholder"),o<r?this.insertBefore(a,i.nextSibling):this.insertBefore(a,i)},!1),t.addEventListener("dragover",function(n){n.preventDefault(),n.dataTransfer.dropEffect="move"},!1),t.addEventListener("dragleave",function(n){n.preventDefault()},!1),t.addEventListener("dragend",function(n){n.preventDefault();let i=this.querySelector(".oms-drag-placeholder");i!==null&&(this.insertBefore(e.dragging,i),this.removeChild(i),e.dragging=null)},!1),t.addEventListener("drop",function(n){n.stopPropagation(),n.preventDefault()},!1))}};var rt=class{constructor(t){this.app=t}bind(t=null){if(t!==null){this.bindElement(t);return}let e=document.querySelectorAll(".oms-ordercontainer"),n=e?e.length:0;for(let i=0;i<n;++i)this.bindElement(e[i])}bindElement(t){t&&t.addEventListener("click",function(e){if(!u.hasClass(e.target,"order-up")&&!u.hasClass(e.target,"order-down"))return;u.preventAll(e);let n=t.children.length,i=e.target.closest(".oms-ordercontainer "+this.children[n-1].tagName),r=Array.from(t.children).indexOf(i),o=u.hasClass(e.target,"order-up")?1:-1;o===1&&r>0?t.insertBefore(t.children[r],t.children[r-1]):o===-1&&r<n&&t.insertBefore(t.children[r],t.children[r+2])},!1)}};var ot=class l{constructor(t){this.app=t}bind(){let t=document.querySelectorAll(".oms-remotecontainer"),e=t?t.length:0;setInterval(function(){for(let n=0;n<e;++n){let i=t[n].getAttribute("data-remote-uri"),r=t[n],o=new N;o.setData({}),o.setType(L.JSON),o.setUri(i),o.setMethod(R.GET),o.setSuccess(function(s){let a=JSON.parse(s.response),c=a.length,d=null;for(let g=0;g<c;++g){let m=r.querySelectorAll(r.getAttribute("data-ui-element"));if(d=m.length-1<g?null:m[g],d===null||d.getAttribute("data-id")!==a[g].id){let b=r.getAttribute("data-add-tpl").split(","),h=b.length,w=[],y=[],A=[];for(let E=0;E<h;++E){A.push(document.querySelector(b[E]).content.cloneNode(!0));let C=A[E].firstElementChild;w=w.concat(C.hasAttribute("data-tpl-value")?C:Array.prototype.slice.call(C.querySelectorAll("[data-tpl-value]"))),y=y.concat(C.hasAttribute("data-tpl-text")?C:Array.prototype.slice.call(C.querySelectorAll("[data-tpl-text]")))}l.setRemoteData("text",y,a[g]),l.setRemoteData("value",w,a[g]);for(let E=0;E<h;++E)d===null?r.appendChild(A[E].firstElementChild):r.insertBefore(A[E].firstElementChild,d);continue}else if(d!==null&&d.getAttribute("data-id")===a[g].id){let b=[],h=[],w=d;b=b.concat(w.hasAttribute("data-tpl-value")?w:Array.prototype.slice.call(w.querySelectorAll("[data-tpl-value]"))),h=h.concat(w.hasAttribute("data-tpl-text")?w:Array.prototype.slice.call(w.querySelectorAll("[data-tpl-text]"))),l.setRemoteData("text",h,a[g]),l.setRemoteData("value",b,a[g])}}let p=t[n].querySelectorAll(t[n].getAttribute("data-ui-element")),f=p.length;for(let g=c;g<f;++g)r.removeChild(p[g])}),o.send()}},30*1e3)}static setRemoteData(t,e,n={}){let i=e.length;for(let r=0;r<i;++r){let o=e[r].hasAttribute("data-tpl-"+t+"-path")?e[r].getAttribute("data-tpl-"+t+"-path"):null;o!==null&&(t==="value"?O.setValueOfElement(e[r],u.getArray(o,n)):O.setTextOfElement(e[r],u.getArray(o,n)))}}};var st=class{constructor(t){this.app=t}bind(t=null){if(t!==null){this.bindElement(t);return}let e=document.querySelectorAll(".oms-ui-state"),n=e?e.length:0;for(let i=0;i<n;++i)this.loadState(e[i]),this.bindElement(e[i]);for(let i=0;i<n;++i)this.loadState(e[i])}loadState(t){if(!t)return;let e=JSON.parse(window.localStorage.getItem("ui-state-"+t.id));switch(e=e!==null?e:{},t.tagName.toLowerCase()){case"input":(e==="1"&&!t.checked||e==="0"&&t.checked)&&t.click();break;case"div":t.scrollLeft=e.x,t.scrollTop=e.y,t.scrollTo({top:e.y,left:e.x});break;default:break}}bindElement(t){if(t)switch(t.tagName.toLowerCase()){case"input":t.addEventListener("change",function(e){this.getAttribute("type")==="checkbox"||this.getAttribute("type")==="radio"?window.localStorage.setItem("ui-state-"+this.id,JSON.stringify(this.checked?"1":"0")):window.localStorage.setItem("ui-state-"+this.id,JSON.stringify(this.value))});break;case"div":t.addEventListener("scroll",function(){window.localStorage.setItem("ui-state-"+this.id,JSON.stringify({x:this.scrollLeft,y:this.scrollTop}))});break;default:break}}};var at=class{constructor(t){this.app=t,this.formManager=new Z(this.app),this.tabManager=new _(this.app),this.tableManager=new et(this.app),this.actionManager=new nt(this.app),this.dragNDrop=new it(this.app),this.order=new rt(this.app),this.generalUI=new O(this.app),this.remoteData=new ot(this.app),this.uiStateManager=new st(this.app);let e=this;this.domObserver=new MutationObserver(function(n){let i=n.length;for(let r=0;r<i;++r)e.app.eventManager.trigger(n[r].target.id+"-"+n[r].type,0,n[r])})}bind(t=null){if(t===null){this.formManager.bind(),this.tabManager.bind(),this.tableManager.bind(),this.actionManager.bind(),this.dragNDrop.bind(),this.order.bind(),this.generalUI.bind(),this.remoteData.bind(),this.uiStateManager.bind();return}let e=document.getElementById(t);if(this.generalUI.bind(e),!!e)switch(e.tagName){case"form":this.formManager.bind(t);break;case"table":this.tableManager.bind(t);break;default:this.actionManager.bind(e)}}getFormManager(){return this.formManager}getActionManager(){return this.actionManager}getDragNDrop(){return this.dragNDrop}getOrder(){return this.order}getRemoteData(){return this.remoteData}getUIStatemanager(){return this.uiStateManager}getTabManager(){return this.tabManager}getTableManager(){return this.tabManager}getDOMObserver(){return this.domObserver}getGeneralUI(){return this.generalUI}};var lt=class{constructor(){this.elements={},this.down=[]}add(t,e,n){typeof this.elements[t]>"u"&&(this.elements[t]=[],this.bind(t)),this.elements[t].push({keys:e,callback:n})}bind(t){let e=this,n=t===""?[document]:document.querySelectorAll(t),i=n.length;for(let r=0;r<i;++r)n[r].addEventListener("keydown",function(o){e.down.includes(o.keyCode)||(e.down.push(o.keyCode),e.run(t,o))}),n[r].addEventListener("keyup",function(o){let s=e.down.indexOf(o.keyCode);for(;s>-1;)e.down.splice(s,1),s=e.down.indexOf(o.keyCode)})}run(t,e){if(typeof this.elements[t]>"u")throw new Error("Unexpected element!");let n=this.elements[t].concat(this.elements[""]),i=n.length,r=this.down.length;for(let o=0;o<i;++o){let s=n[o].keys.length,a=!0;for(let c=0;c<s;++c)if(this.down.indexOf(n[o].keys[c])===-1){a=!1;break}if(a){for(let c=0;c<r;++c)if(n[o].keys.indexOf(this.down[c])===-1){a=!1;break}}if(a){u.preventAll(e),n[o].callback(e);break}}}};var F=Object.freeze({CONTEXT:0,LONGPRESS:1,CLICK:2});var ct=class{constructor(){this.elements={},this.click={time:0}}add(t,e,n,i,r){let o=document.querySelectorAll(t),s=o.length;for(let a=0;a<s;++a)typeof this.elements[o[a].id]>"u"&&(this.elements[o[a].id]=[]),this.bind(o[a].id,e),this.elements[o[a].id].push({callback:i,type:e,button:n,exact:r})}bind(t,e){let n=this,i=document.getElementById(t);i&&(e===F.CONTEXT?i.addEventListener("contextmenu",function(r){n.run(t,r)},!1):e===F.LONGPRESS?(i.addEventListener("mousedown",function(r){n.click.time=new Date().getTime()},!1),i.addEventListener("mouseup",function(r){new Date().getTime()-n.click.time>650&&n.run(t,r),n.click.time=0},!1)):e===F.CLICK&&i.addEventListener("click",function(r){n.run(t,r)},!1))}run(t,e){if(typeof this.elements[t]>"u")throw new Error("Unexpected element!");let n=this.elements[t],i=n.length;for(let r=0;r<i;++r)(!n[r].exact||e.target.getAttribute("id")===t)&&n[r].button===e.button&&(u.preventAll(e),n[r].callback())}};var H=class{constructor(t,e={},n="en-US"){this.app=t,this.commands=e,this.lang=n,this.recognition=null,this.speechRecognitionList=null,j!==null&&ut!==null&&(this.recognition=new j,this.speechRecognitionList=new ut)}setup(){if(j===null)return;let t=this;this.recognition.lang=this.lang,this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.continuous=!0,this.recognition.lang=this.lang,typeof this.commands<"u"&&(this.speechRecognitionList.addFromString(this.getCommandsString(),1),this.recognition.grammars=this.speechRecognitionList),this.recognition.onstart=function(){},this.recognition.onresult=function(e){let n=u.trim(e.results[e.resultIndex][0].transcript),i=Object.keys(t.commands);for(let r of i)n.startsWith(r)&&t.commands[r](n.substr(r.length).trim())},this.recognition.onspeechend=function(){},this.recognition.onnomatch=function(e){v.instance.warning("Couldn't recognize speech")},this.recognition.onerror=function(e){v.instance.warning("Error during speech recognition: "+e.error)}}getCommandsString(){return"#JSGF V1.0; grammar phrase; public <phrase> = "+Object.keys(this.commands).join(" | ")+" ;"}setLanguage(t){this.recognition.lang=t}add(t,e){this.commands[t]=e}start(){j!==null&&this.recognition.start()}stop(){j!==null&&this.recognition.stop()}},j=typeof j<"u"?j:typeof webkitSpeechRecognition<"u"?webkitSpeechRecognition:null,ut=typeof ut<"u"?ut:typeof webkitSpeechGrammarList<"u"?webkitSpeechGrammarList:null;var dt=class{constructor(t){this.keyboardManager=new lt,this.mouseManager=new ct,this.voiceManager=new H(t)}getKeyboardManager(){return this.keyboardManager}getMouseManager(){return this.mouseManager}getVoiceManager(){return this.voiceManager}};var mt=class{static getInstance(t,e){return new window.omsApp.Modules[t](e)}};var ft=class{constructor(t){this.modules={},this.app=t}get(t){return typeof this.modules[t]>"u"&&(this.modules[t]=mt.getInstance(t,this.app)),this.modules[t]}};var pt=class{constructor(t="en-US"){this.pitch=1,this.rate=1,this.lang=t,this.voices=[],this.voice=null,St!==null&&(this.voices=window.speechSynthesis.getVoices(),this.voice=this.voices[0])}read(t){let e=new SpeechSynthesisUtterance(t);e.lang=this.lang,e.voice=this.voice,e.pitch=this.pitch,e.rate=this.rate,window.speechSynthesis.speak(e)}setLanguage(t){this.lang=t}setPitch(t){this.pitch=t}setRate(t){this.rate=t}getVoices(){return this.voices}},St=typeof St<"u"?St:typeof webkitSpeechRecognition<"u"?webkitSpeechRecognition:null;var ht=class{constructor(){this.status=0}setStatus(t){this.status=t}send(t){let e=document.getElementById("app-message-tpl");if(e===null)return;switch(t.status){case 0:t.status=I.OK;break}let n=document.importNode(e.content,!0);if(n.querySelector(".log-msg").classList.add("log-lvl-"+t.status),n.querySelector(".log-msg-content").innerHTML=t.message,n.querySelector(".close").addEventListener("click",function(){this.parentNode.remove()}),t.title&&t.title!==""?n.querySelector(".log-msg-title").innerHTML=t.title:n.querySelector(".log-msg-title").remove(),t.primaryButton){let o=n.querySelector(".primary-button");o&&(o.innerHTML=t.primaryButton.text,o.addEventListener("click",t.primaryButton.callback))}else{let o=n.querySelector(".primary-button");o&&o.remove()}if(t.secondaryButton){let o=n.querySelector(".secondary-button");o&&(o.innerHTML=t.secondaryButton.text,o.addEventListener("click",t.secondaryButton.callback))}else{let o=n.querySelector(".secondary-button");o&&o.remove()}e.parentNode.appendChild(n);let i=document.getElementsByClassName("log-msg"),r=i[i.length-1];typeof window.navigator.vibrate<"u"&&window.navigator.vibrate(t.vibrate?200:0),!t.isSticky&&setTimeout(function(){r!==null&&r.parentNode!==null&&r.parentNode.removeChild(r)},t.duration)}};var gt=class{constructor(){this.status=0}setStatus(t){this.status=t}requestPermission(){Notification.permission!=="granted"&&Notification.permission!=="denied"&&window.isSecureContext&&Notification.requestPermission()}send(t){Notification.permission==="granted"&&navigator.serviceWorker.ready.then(e=>{e.showNotification(t.title,{body:t.message,icon:"../images/touch/chrome-touch-icon-192x192.png",vibrate:[t.vibrate?200:0],tag:"notification"})})}};var yt=class{constructor(){this.appNotifier=new ht,this.browserNotifier=new gt}send(t,e){T.APP_NOTIFICATION===e?this.appNotifier.send(t):this.browserNotifier.send(t)}getAppNotifier(){return this.appNotifier}getBrowserNotifier(){return this.browserNotifier}};function bt(l,t,e){setTimeout(function(){let n=l.uri===""?"":S.build(l.uri);l.src?document.getElementById(l.src).src=n:n===window.location.href||n===""?document.location.reload():window.location.href=n},parseInt(l.delay))}function Ot(l,t,e){"use strict";l.uri===""&&(l.uri=document.getElementById(e).href);let n=new N(l.uri,l.method,l.request_type);n.setSuccess(function(i){window.omsApp.logger.log(i.responseText),t(JSON.parse(i.responseText))}),typeof l.data<"u"&&l.data!==null&&n.setData(l.data),n.send()}function Lt(l,t,e){"use strict";window.omsApp.notifyManager.send(new x(l.data[0].status,l.data[0].title,l.data[0].message),T.APP_NOTIFICATION),typeof t=="function"&&t()}function xt(l,t,e){"use strict";window.omsApp.logger.log("prevented"),u.preventAll(l.data),typeof t=="function"&&t()}function Tt(l,t,e){"use strict";l.key=l.jump-1,t()}function It(l,t,e){"use strict";let n=l.conditions,i=Object.values(l.data)[0];for(let r in n)if(n[r].comp==="=="&&i===n[r].value){l.key=n[r].jump-1;break}else if(n[r].comp==="!="&&i!==n[r].value){l.key=n[r].jump-1;break}else if(n[r].comp===">"&&i>n[r].value){l.key=n[r].jump-1;break}else if(n[r].comp==="<"&&i<n[r].value){l.key=n[r].jump-1;break}else if(n[r].comp===">="&&i>=n[r].value){l.key=n[r].jump-1;break}else if(n[r].comp==="<="&&i<=n[r].value){l.key=n[r].jump-1;break}else if(n[r].comp===""){l.key=n[r].jump-1;break}typeof t=="function"&&t()}function kt(l,t,e){"use strict";let n=l.base==="self"?l.selector===""?[document.getElementById(e)]:document.getElementById(e).querySelectorAll(l.selector):document.querySelectorAll(l.selector);if(n){for(let i of n)i.click();typeof t=="function"&&t()}}function qt(l,t,e){"use strict";let n=l.base==="self"?l.selector===""||typeof l.selector>"u"?[document.getElementById(e)]:document.getElementById(e).querySelectorAll(l.selector):document.querySelectorAll(l.selector),i={};for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||!(n[r]instanceof HTMLElement))continue;let o=typeof n[r].getAttribute("name")<"u"&&n[r].getAttribute("name")!==""&&n[r].getAttribute("name")!==null?n[r].getAttribute("name"):n[r].getAttribute("id");if(n[r].tagName.toLowerCase()==="form"){i=window.omsApp.uiManager.getFormManager().get(o).getData();break}else i[o]=O.getValueFromDataSource(n[r])}t(i)}function Rt(l,t,e){"use strict";let n=l.value,i="",r="",o="",s=0,a=0;for(;n.indexOf("http")!==0&&(s=n.indexOf("{",s))!==-1;)a=n.indexOf("}",s),s++,i=n.substring(s,a),r=u.getArray(i,l.data,"/"),o="{"+i+"}",n=n.replace(new RegExp(o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),r);let c=l.base==="self"?l.selector===""?[document.getElementById(e)]:document.getElementById(e).querySelectorAll(l.selector):document.querySelectorAll(l.selector);for(let d in c)!Object.prototype.hasOwnProperty.call(c,d)||!(c[d]instanceof HTMLElement)||(c[d].tagName.toLowerCase()==="div"||c[d].tagName.toLowerCase()==="span"?c[d].innerHTML.includes(n)||(l.overwrite?c[d].innerHTML=n:l.overwrite||(c[d].innerHTML+=n)):c[d].tagName.toLowerCase()==="iframe"?c[d].src=S.build(n):c[d].value!==n&&!c[d].value.includes(", "+n+",")&&!c[d].value.endsWith(", "+n)&&!c[d].value.startsWith(n+",")&&(l.overwrite?c[d].value=n:c[d].value+=(c[d].value!==""?", ":"")+n));t(l.data)}function Mt(l,t,e){"use strict";let n=l.base==="self"?l.selector===""?[document.getElementById(e)]:document.getElementById(e).querySelectorAll(l.selector):document.querySelectorAll(l.selector);for(let i in n)if(!(!Object.prototype.hasOwnProperty.call(n,i)||!(n[i]instanceof HTMLElement)))switch(l.subtype){case"remove":{let r=n[i].getAttribute(l.attr);if(r!==null&&r.match(new RegExp("(\\s|^)"+l.value+"(\\s|$)"))!==null){let o=new RegExp("(\\s|^)"+l.value);n[i].setAttribute(l.attr,r.replace(o,"").trim())}break}case"add":n[i].setAttribute(l.attr,u.trim(n[i].getAttribute(l.attr)+" "+l.value));break;case"set":n[i].setAttribute(l.attr,l.value);break;default:}t(l.data)}function Ft(l,t,e){"use strict";let n=l.base==="self"?l.selector===""?[document.getElementById(e)]:document.getElementById(e).querySelectorAll(l.selector):document.querySelectorAll(l.selector);if(!n)return;let i=window.omsApp.uiManager.getFormManager();for(let r of n)i.submit(i.get(r.id));typeof t=="function"&&t()}var At={redirect:bt,"message.request":Ot,"message.log":Lt,"dom.click":kt,"form.submit":Ft,"event.prevent":xt,"dom.get":qt,"dom.set":Rt,"dom.attr.change":Mt,jump:Tt,if:It};var J=[{element:"",keys:[17,80],callback:function(l){document.getElementById("iSearchBox").focus()}},{element:"",keys:[17],callback:async function(l){let t=document.querySelector("[data-preview]:hover"),e=document.getElementById("hover-preview-checkbox");if(t===null){e.checked=!1;return}let n=document.getElementById("hover-preview"),i=t.getBoundingClientRect(),r=t.getAttribute("data-preview");if(r)try{let s=await(await fetch(r,{mode:"cors"})).text();n.innerHTML=s;let a=n.getBoundingClientRect();if((a.left<i.left&&a.right>i.left||a.left>i.left&&a.left<i.right)&&(a.top<i.top&&a.bottom>i.top||a.top>i.top&&a.top<i.bottom)){let c=a.top<i.top?i.top-a.height-20:i.bottom+20;c<0?c=i.bottom+20:c+a.height>window.innerHeight&&(c=i.top-a.height-20);let d=parseInt(c)+"px";n.style.top!==d&&(n.style.top=parseInt(c)+"px")}e.checked||(e.checked=!0)}catch(o){console.error("Error fetching content:",o.message)}}},{element:"form, input, textarea, select",keys:[17,13],callback:function(l){let t=document.activeElement,e=t.closest("form");if(e!==null&&(e=e.id),e===null&&(e=t.getAttribute("form")),e===null&&(e=t.getAttribute("data-form")),e===null)return;let i=window.omsApp.uiManager.getFormManager().get(e).getSubmit(),r=i.length,o=-1;for(let s=0;s<r;++s)if(!u.hasClass(i[s],"vh")){if(u.hasClass(i[s],"add-form")||u.hasClass(i[s],"update-form")||u.hasClass(i[s],"save-form")){i[s].click();break}o=s}o!==-1&&i[o].click()}},{element:"label, tr",keys:[13],callback:function(l){document.activeElement.click()}},{element:"",keys:[17,66],callback:function(l){window.history.back()}},{element:"",keys:[17,40],callback:function(l){let t=document.querySelectorAll('button, input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=t.length;for(let n=0;n<e;++n)if(document.activeElement===t[n]){let i=1;do n+i<e?t[n+i].focus():t[0+i-1].focus(),++i;while(i<e&&document.activeElement===t[n]);return}document.dispatchEvent(new KeyboardEvent("keypress",{keyCode:9}))}},{element:"",keys:[17,38],callback:function(l){let t=document.querySelectorAll('button, input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=t.length;for(let n=0;n<e;++n)if(document.activeElement===t[n]){let i=1;do n-i+1>0?t[n-i].focus():t[e-i].focus(),++i;while(i<e&&document.activeElement===t[n]);return}document.dispatchEvent(new KeyboardEvent("keypress",{keyCode:9}))}}];var wt=Object.freeze({LEFT:0,MIDDLE:1,RIGHT:2});var P=[{element:"#nav-side",type:F.CONTEXT,button:wt.RIGHT,callback:function(){window.omsApp.logger.log("right clicked")},exact:!0},{element:"#nav-side",type:F.LONGPRESS,button:wt.LEFT,callback:function(){window.omsApp.logger.log("left clicked")},exact:!1},{element:'[tabindex="0"][data-preview]',type:F.CLICK,button:wt.LEFT,callback:async function(){let l=document.getElementById("hover-preview-checkbox"),t=document.activeElement;if(t===null)return;let e=document.getElementById("hover-preview"),n=t.getBoundingClientRect(),i=t.getAttribute("data-preview");if(i)try{let o=await(await fetch(i,{mode:"cors"})).text();e.innerHTML=o;let s=e.getBoundingClientRect();if((s.left<n.left&&s.right>n.left||s.left>n.left&&s.left<n.right)&&(s.top<n.top&&s.bottom>n.top||s.top>n.top&&s.top<n.bottom)){let a=s.top<n.top?n.top-s.height-20:n.bottom+20;a<0?a=n.bottom+20:a+s.height>window.innerHeight&&(a=n.top-s.height-20),e.style.top=parseInt(a)+"px"}l.checked=!0,setTimeout(()=>{l.checked=!1},"3000")}catch(r){console.error("Error fetching content:",r.message)}},exact:!1}];function Bt(l){let t=new x(l.level,l.title,l.msg);t.duration=5e3,window.omsApp.notifyManager.send(t,T.APP_NOTIFICATION)}function Dt(l){if(!document.getElementById(l.form))return;let e=document.getElementsByClassName("i-"+l.form);for(;e.length>0;)e[0].parentNode.removeChild(e[0]);l.errors.forEach(function(n){let i=document.getElementById(n.id);if(!i)return;let r=document.createElement("i"),o=document.createTextNode(n.msg);r.id="i-"+n.id,r.class="i-"+l.form,r.appendChild(o),i.parentNode.insertBefore(r,i.nextSibling)})}var Et={notify:Bt,validation:Dt,redirect:bt};var vt={read:"read_text",help:function(){v.instance.debug("There is no help for you.")},"go to":function(l){let t=new N;t.setData({}),t.setType(L.FORM_DATA),t.setUri("api/navigation/goto?app=Backend&search="+l),t.setMethod(R.GET),t.setSuccess(function(e){window.omsApp.logger.log(e.response);try{let n=JSON.parse(e.response)[0],i=new U(n);typeof i.get("type")<"u"?window.omsApp.responseManager.run(i.get("type"),i.get(),t):typeof n.status<"u"&&n.status!==I.HIDDEN&&window.omsApp.notifyManager.send(new x(n.status,n.title,n.message),T.APP_NOTIFICATION)}catch(n){window.omsApp.logger.log(n),v.instance.error(`Invalid form response. 
Request: `+JSON.stringify(l)+`
Response: `+e.response)}}),t.setResultCallback(0,function(e){window.omsApp.notifyManager.send(new x(I.ERROR,"Failure","Some failure happened"),T.APP_NOTIFICATION)}),t.send()}};var Ct=class{constructor(){this.logger=v.getInstance(!0,!1,!1),window.logger=this.logger,this.cacheManager=new z,this.storageManager=new Q,this.eventManager=new Y,this.responseManager=new X,this.assetManager=new K,this.accountManager=new $,this.uiManager=new at(this),this.inputManager=new dt(this),this.moduleManager=new ft(this),this.readManager=new pt,this.voiceManager=new H(this),this.notifyManager=new yt,this.request=null,this.state={hasChanges:!1},this.reInit(),this.setupGeolocation(),this.setupNotificationManager(),this.setupServiceWorker(),this.setResponseMessages(),this.setVoiceActions(),this.setActions(),this.setKeyboardActions(),this.setMouseActions(),this.setPopstate(),this.setupMobileHeaderHandling()}setupMobileHeaderHandling(){let t=document.getElementById("content");if(t===null)return;window.innerWidth<800&&(document.querySelector("main>header").style.display="none");let e=0;t.addEventListener("touchstart",function(n){window.innerWidth>799||(e=n.touches[0].clientY)}),t.addEventListener("touchmove",function(n){window.innerWidth>799||(n.touches[0].clientY>e+50&&this.scrollTop===0?document.querySelector("main>header").style.display="":n.touches[0].clientY<e-50&&(document.querySelector("main>header").style.display="none"))})}reInit(){this.request=new k(window.location.href),this.request.setRootPath(k.parseUrl(typeof document.getElementsByTagName("base")[0]<"u"?document.getElementsByTagName("base")[0].href:"").path),S.setupUriBuilder(this.request),S.setQuery("/lang",window.location.href.substr(this.request.getBase().length).split("/")[0]),this.uiManager.bind()}setPopstate(){window.addEventListener("popstate",function(t,e){window.location.href=window.location.href})}setupGeolocation(){"geolocation"in navigator&&window.isSecureContext&&navigator.geolocation.getCurrentPosition(t=>{})}setupNotificationManager(){this.notifyManager.browserNotifier.requestPermission()}setupServiceWorker(){"serviceWorker"in navigator&&window.isSecureContext&&navigator.serviceWorker.register("sw.min.js").then(function(t){self.periodicSync.register("get-latest-notification",{minInterval:60*1}).then(()=>{v.instance.warning("PeriodicSync registration worked.")}).catch(function(e){v.instance.warning("PeriodicSync registration failed.")})}).catch(function(t){v.instance.warning("ServiceWorker registration failed.")})}setResponseMessages(){for(let t in Et)Et.hasOwnProperty(t)&&this.responseManager.add(t,Et[t])}setActions(){for(let t in At)At.hasOwnProperty(t)&&this.uiManager.getActionManager().add(t,At[t])}setKeyboardActions(){let t=J.length;for(let e=0;e<t;e++)this.inputManager.getKeyboardManager().add(J[e].element,J[e].keys,J[e].callback)}setMouseActions(){let t=P.length;for(let e=0;e<t;e++)this.inputManager.getMouseManager().add(P[e].element,P[e].type,P[e].button,P[e].callback,P[e].exact)}setVoiceActions(){for(let t in vt)vt.hasOwnProperty(t)&&this.voiceManager.add(t,vt[t]);this.voiceManager.setup(),this.voiceManager.start()}};u.ready(function(){"use strict";window.omsApp=new Ct});})();
/**
 * Standard library
 *
 * This library provides useful functionalities for the DOM and other manipulations.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Asset manager.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Log Level enum.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Http Uri.
 *
 * This class is for creating, modifying and analyzing http uris.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Form view.
 *
 * The form view contains a single form and it's data elements. Form actions are no longer handled by
 * the browser but through this view. The view also provides additional functionality for non-default
 * form elements such as canvas etc.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 *
 * @todo On change listener
 *      Allow to add a on change listener in a form. This should result in automatic submits after changing a form.
 *      Consider the following cases to submit the form:
 *          * on Enter (all except textarea)
 *          * on Change (by using a timer)
 *          * on Leave (all elements)
 *      The listener should be defined in the form definition once and in js be applied to all form elements.
 *      https://github.com/Karaka-Management/jsOMS/issues/60
 */
/**
 * Uri factory.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Http request method.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Request type enum.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Request class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 *
 * @question Consider to completely remove and replace with fetch
 */
/**
 * Request data enum.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * System utils class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Logger class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Request manager class.
 *
 * Used for pooling requests.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Response manager class.
 *
 * Used for auto handling different responses.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Account Manager.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Notification data enum.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * App notification message.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Advanced input class.
 *
 * @copyright  Dennis Eichhorn
 * @license    OMS License 2.2
 * @version    1.0.0
 * @since      1.0.0
 */
/**
 * Smart input class.
 *
 * @copyright  Dennis Eichhorn
 * @license    OMS License 2.2
 * @version    1.0.0
 * @since      1.0.0
 */
/**
 * UI manager for handling basic ui elements.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Form manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 *
 * @todo Adding a template to the DOM should modify its id/generate a custom/random id for the added element
 *      for future handling as very often ids are required to identify and manage UI elements.
 *      https://github.com/Karaka-Management/jsOMS/issues/102
 *
 * @feature Auto update data changes in the backend (e.g. pull every x seconds, or use websockets for push)
 *      https://github.com/Karaka-Management/Karaka/issues/151
 */
/**
 * Tab manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Table view.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 *
 * @todo Karaka/jsOMS#50
 *  Add basic table handling (no db and pagination)
 *
 * @todo Karaka/jsOMS#55
 *  Implement filtering and sorting based on backend
 *
 * @todo Karaka/jsOMS#57
 *  Advanced filtering
 *  The current filtering implementation is only column by column connected with &&.
 *  Consider to implement a much more advanced filtering where different combinations are possible such as || &&, different ordering with parenthesis etc.
 *  This can be extremely powerful but will be complex for standard users.
 *  This advanced filtering should probably be a little bit hidden?
 *
 * @todo Karaka/jsOMS#59
 *  Data download
 *  There is a small icon in the top right corner of tables which allows (not yet to be honest) to download the data in the table.
 *  Whether the backend should be queried for this or only the frontend data should be collected (current situation) should depend on if the table has an api endpoint defined.
 */
/**
 * Response type enum.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Table manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 *
 * @feature Karaka/jsOMS#55
 *      Implement filtering and sorting based on backend
 *
 * @feature Karaka/jsOMS#57
 *      Advanced filtering
 *      The current filtering implementation is only column by column connected with &&.
 *      Consider to implement a much more advanced filtering where different combinations are possible such as || &&, different ordering with parenthesis etc.
 *      This can be extremely powerful but will be complex for standard users.
 *      This advanced filtering should probably be a little bit hidden?
 *
 * @feature Karaka/jsOMS#59
 *      Data download
 *      There is a small icon in the top right corner of tables which allows (not yet to be honest) to download the data in the table.
 *      Whether the backend should be queried for this or only the frontend data should be collected (current situation) should depend on if the table has an api endpoint defined.
 *
 * @feature Allow column drag/drop ordering which is also saved in the front end
 *
 * @feature Implement a filter highlight function.
 *      Either in forms or in tables, where the filter icon is highlighted, if a filter is defined.
 *      One solution could be to put an additional hidden filter checkbox in front of the filter icon and check for filter changes
 *      (bubble up) and then activate this hidden checkbox if a filter is defined.
 *      In CSS just define the filter icon as active/highlighted, if the hidden check box is active.
 *      This means we have two hidden checkboxes in front of the filter icon (one in case the filter menu is open = popup
 *      is visible and another one for highlighting the filter icon if a filter is defined).
 *      https://github.com/Karaka-Management/Karaka/issues/148
 *
 * @todo How to preserve form filter data to the next page?
 *      Not an issue, in the future we don't want to reload the whole page,
 *      but only exchange the table/list content with the backend response -> the header/filter will not get changed and
 *      remains as defined. This means for tables (maybe even forms?) to setup content replacement earlier than for other pages?!
 *      https://github.com/Karaka-Management/Karaka/issues/149
 */
/**
 * Action manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 *
 * @todo Karaka/jsOMS#26
 *  Sync/Async events
 *  Events so far can be created sync and async depending on the implementation.
 *  It would be better to make it sync/async depending on a option flag.
 *
 * @todo Karaka/jsOMS#35
 *  Template actions cannot be overwritten
 *  Templates by nature get added and removed from a page (often in order to reuse existing html to minimize the html load).
 *  The problem with templates is that they need to register in the ActionManager.js.
 *  A listener currently is only registered once per id.
 *  Since templates often keep the same id for some elements this results in a problem because the new template will not register a new listener.
 *  Possible solutions:
 *      1. Force unique ids for templates during setup (pro: fast and easy initial solution, con: action event pollution not solved)
 *      2. Whenever a dom element with action elements is removed, also unregister the listeners (pro: clean solution, con: difficult to implement)
 *  Solution 2 will be implemented.
 *  Maybe this can be performed in the dom removing action events or a dom listener would be required to listen for these dom elements.
 */
/**
 * Drag and drop class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Manual order class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Remote data class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * UI state manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Keyboard manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Event type.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Mouse manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Voice manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * UI manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Module factory.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Module manager.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Form manager class.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * App notification.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Browser notification.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Notification manager.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Click type.
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
/**
 * Application entry point
 *
 * @copyright Dennis Eichhorn
 * @license   OMS License 2.2
 * @version   1.0.0
 * @since     1.0.0
 */
